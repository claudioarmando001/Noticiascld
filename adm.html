<!doctype html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Painel Admin - Not√≠cias CLD</title>
    <style>
    :root {
        --primary: #1a73e8;
        --primary-dark: #0d47a1;
        --secondary: #4CAF50;
        --danger: #f44336;
        --warning: #FF9800;
        --success: #4CAF50;
        --dark: #2c3e50;
        --light: #ecf0f1;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Roboto', 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: var(--dark);
        line-height: 1.6;
    }

    /* LOGIN SCREEN */
    #login-screen {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
    }

    .login-container {
        background: white;
        border-radius: 20px;
        padding: 50px;
        width: 100%;
        max-width: 500px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .login-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 8px;
        background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
    }

    .login-logo {
        font-size: 48px;
        color: var(--primary);
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        gap: 15px;
    }

    .login-title {
        font-size: 32px;
        font-weight: 800;
        color: var(--dark);
        margin-bottom: 10px;
    }

    .login-subtitle {
        color: #7f8c8d;
        margin-bottom: 40px;
        font-size: 16px;
    }

    .login-form {
        margin-bottom: 30px;
    }

    .form-group {
        margin-bottom: 25px;
        text-align: left;
    }

    .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--dark);
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .form-input {
        width: 100%;
        padding: 18px 25px;
        border: 2px solid var(--light);
        border-radius: 12px;
        font-size: 18px;
        font-family: monospace;
        letter-spacing: 3px;
        transition: all 0.3s;
        background: #f8f9fa;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 5px 20px rgba(26, 115, 232, 0.2);
        background: white;
    }

    .login-btn {
        width: 100%;
        padding: 18px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 10px;
        box-shadow: 0 5px 15px rgba(26, 115, 232, 0.3);
    }

    .login-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(26, 115, 232, 0.4);
    }

    .login-btn:active {
        transform: translateY(-1px);
    }

    .login-error {
        color: var(--danger);
        margin-top: 15px;
        font-size: 14px;
        display: none;
        padding: 10px;
        background: #ffebee;
        border-radius: 8px;
        border-left: 4px solid var(--danger);
    }

    .login-footer {
        margin-top: 30px;
        color: #95a5a6;
        font-size: 14px;
    }

    /* ADMIN PANEL (ap√≥s login) */
    #admin-panel {
        display: none;
        min-height: 100vh;
        background: var(--light);
    }

    .admin-header {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        padding: 25px 40px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        position: sticky;
        top: 0;
        z-index: 1000;
    }

    .admin-header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1400px;
        margin: 0 auto;
    }

    .admin-logo {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 28px;
        font-weight: 700;
    }

    .admin-logo i {
        color: #FFD700;
        font-size: 32px;
    }

    .admin-actions {
        display: flex;
        gap: 15px;
        align-items: center;
    }

    .logout-btn {
        background: rgba(255,255,255,0.2);
        color: white;
        border: 2px solid rgba(255,255,255,0.3);
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .logout-btn:hover {
        background: rgba(255,255,255,0.3);
        transform: translateY(-2px);
    }

    .back-btn {
        background: rgba(255,255,255,0.9);
        color: var(--primary);
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s;
    }

    .back-btn:hover {
        background: white;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255,255,255,0.2);
    }

    /* CONTAINER PRINCIPAL */
    .admin-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px;
    }

    /* TABS */
    .admin-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 40px;
        background: white;
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        overflow-x: auto;
    }

    .tab-btn {
        padding: 15px 30px;
        background: #f8f9fa;
        border: 2px solid transparent;
        border-radius: 12px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        color: #666;
        transition: all 0.3s;
        white-space: nowrap;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .tab-btn:hover {
        background: #e9ecef;
        color: var(--primary);
    }

    .tab-btn.active {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        box-shadow: 0 5px 15px rgba(26, 115, 232, 0.3);
    }

    .tab-btn i {
        font-size: 18px;
    }

    .tab-content {
        display: none;
        animation: fadeIn 0.5s ease-out;
    }

    .tab-content.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
   /* MENSAGENS */
    .message {
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 30px;
        display: none;
        animation: slideIn 0.5s ease-out;
        border-left: 5px solid;
    }

    .message.success {
        background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
        border-left-color: var(--success);
        color: #2E7D32;
    }

    .message.error {
        background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%);
        border-left-color: var(--danger);
        color: #c62828;
    }

    .message.info {
        background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
        border-left-color: var(--primary);
        color: #1565C0;
    }

    /* ESTAT√çSTICAS */
    .stats-section {
        margin-bottom: 50px;
    }

    .stats-title {
        font-size: 24px;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
    }

    .stat-card {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        transition: all 0.3s;
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
    }

    .stat-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.12);
        border-color: var(--primary);
    }

    .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .stat-icon {
        font-size: 36px;
        color: var(--primary);
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .stat-trend {
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
    }

    .stat-trend.positive {
        background: #E8F5E9;
        color: #2E7D32;
    }

    .stat-trend.negative {
        background: #FFEBEE;
        color: #c62828;
    }

    .stat-content h3 {
        font-size: 14px;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 10px;
    }

    .stat-number {
        font-size: 42px;
        font-weight: 800;
        color: var(--dark);
        margin-bottom: 15px;
    }

    .stat-desc {
        color: #95a5a6;
        font-size: 14px;
        line-height: 1.5;
    }

    /* FONTES */
    .sources-section {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        margin-bottom: 50px;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
    }

    .section-title {
        font-size: 28px;
        font-weight: 700;
        color: var(--dark);
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .section-actions {
        display: flex;
        gap: 15px;
    }

    .action-btn {
        padding: 14px 28px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s;
    }

    .action-btn.primary {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
    }

    .action-btn.success {
        background: linear-gradient(135deg, var(--success) 0%, #2E7D32 100%);
        color: white;
    }

    .action-btn.warning {
        background: linear-gradient(135deg, var(--warning) 0%, #EF6C00 100%);
        color: white;
    }

    .action-btn.danger {
        background: linear-gradient(135deg, var(--danger) 0%, #c62828 100%);
        color: white;
    }

    .action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    /* FORMUL√ÅRIO DE FONTE */
    .form-section {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 40px;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 25px;
    }

    .form-control {
        margin-bottom: 25px;
    }

    .form-control label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        color: var(--dark);
    }

    .form-control input,
    .form-control select,
    .form-control textarea {
        width: 100%;
        padding: 15px 20px;
        border: 2px solid #dee2e6;
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.3s;
        background: white;
    }

    .form-control input:focus,
    .form-control select:focus,
    .form-control textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 5px 15px rgba(26, 115, 232, 0.1);
    }

    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .checkbox-group input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    .checkbox-group label {
        margin-bottom: 0;
        cursor: pointer;
    }
    /* LISTA DE FONTES */
    .sources-list {
        display: grid;
        gap: 20px;
    }

    .source-item {
        background: white;
        border-radius: 15px;
        padding: 25px;
        border: 2px solid #e9ecef;
        transition: all 0.3s;
    }

    .source-item:hover {
        border-color: var(--primary);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .source-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .source-info h3 {
        font-size: 20px;
        color: var(--dark);
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .source-info p {
        color: #666;
        font-size: 14px;
        word-break: break-all;
    }

    .source-status {
        padding: 8px 20px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .status-active {
        background: #E8F5E9;
        color: #2E7D32;
    }

    .status-inactive {
        background: #FFEBEE;
        color: #c62828;
    }

    .source-actions {
        display: flex;
        gap: 10px;
    }

    .source-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s;
    }

    .source-btn.edit {
        background: #FFE0B2;
        color: #EF6C00;
    }

    .source-btn.delete {
        background: #FFCDD2;
        color: #c62828;
    }

    .source-btn.toggle {
        background: #C8E6C9;
        color: #2E7D32;
    }

    .source-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    /* NOT√çCIAS GUARDADAS */
    .saved-news-section {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }

    .search-box {
        margin-bottom: 30px;
    }

    .search-input {
        width: 100%;
        padding: 18px 25px;
        border: 2px solid #e9ecef;
        border-radius: 12px;
        font-size: 16px;
        transition: all 0.3s;
    }

    .search-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 5px 15px rgba(26, 115, 232, 0.1);
    }

    .saved-list {
        display: grid;
        gap: 20px;
        max-height: 600px;
        overflow-y: auto;
        padding-right: 15px;
    }

    .saved-item {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 20px;
        transition: all 0.3s;
        border: 2px solid transparent;
    }

    .saved-item:hover {
        border-color: var(--primary);
        transform: translateX(10px);
        background: white;
    }

    .saved-item-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
    }

    .saved-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--dark);
        line-height: 1.4;
        flex: 1;
    }

    .saved-meta {
        display: flex;
        gap: 15px;
        color: #666;
        font-size: 14px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }

    .saved-actions {
        display: flex;
        gap: 10px;
        margin-top: 15px;
    }

    /* CONFIGURA√á√ïES */
    .settings-section {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }

    .settings-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 30px;
    }

    .setting-group {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 25px;
    }

    .setting-group h3 {
        font-size: 18px;
        color: var(--dark);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
        padding-bottom: 15px;
        border-bottom: 2px solid #e9ecef;
    }

    /* MODAL */
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.7);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 20px;
        backdrop-filter: blur(5px);
    }

    .modal {
        background: white;
        border-radius: 20px;
        padding: 40px;
        width: 100%;
        max-width: 500px;
        position: relative;
        animation: modalIn 0.4s ease-out;
    }

    @keyframes modalIn {
        from { opacity: 0; transform: translateY(-50px) scale(0.9); }
        to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .modal-close {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        font-size: 24px;
        color: #666;
        cursor: pointer;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
    }

    .modal-close:hover {
        background: #f8f9fa;
        color: var(--danger);
        transform: rotate(90deg);
    }

    .modal-title {
        font-size: 24px;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 20px;
        text-align: center;
    }

    .modal-content {
        margin-bottom: 30px;
        color: #666;
        text-align: center;
        line-height: 1.6;
    }

    .modal-actions {
        display: flex;
        gap: 15px;
        justify-content: center;
    }
    /* RESPONSIVIDADE */
    @media (max-width: 768px) {
        .admin-header-content {
            flex-direction: column;
            gap: 20px;
            text-align: center;
        }
        
        .admin-tabs {
            flex-wrap: wrap;
        }
        
        .tab-btn {
            flex: 1;
            min-width: 150px;
        }
        
        .section-header {
            flex-direction: column;
            gap: 20px;
            text-align: center;
        }
        
        .stats-grid {
            grid-template-columns: 1fr;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .settings-grid {
            grid-template-columns: 1fr;
        }
    }

    /* ANIMA√á√ïES */
    @keyframes slideIn {
        from { transform: translateX(-100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    /* SCROLLBAR */
    ::-webkit-scrollbar {
        width: 10px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--primary);
        border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--primary-dark);
    }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- TELA DE LOGIN -->
    <div id="login-screen">
        <div class="login-container">
            <div class="login-logo">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h1 class="login-title">Painel Administrativo</h1>
            <p class="login-subtitle">Not√≠cias CLD - Sistema de Gerenciamento</p>
            
            <div class="login-form">
                <div class="form-group">
                    <label class="form-label">Senha de Acesso</label>
                    <input type="password" 
                           id="admin-password" 
                           class="form-input" 
                           placeholder="Digite a senha"
                           maxlength="4"
                           oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                    <small style="color: #666; display: block; margin-top: 8px;">
                        Dica: Senha num√©rica de 4 d√≠gitos
                    </small>
                </div>
                
                <div id="login-error" class="login-error">
                    <i class="fas fa-exclamation-circle"></i> Senha incorreta!
                </div>
                
                <button class="login-btn" onclick="login()">
                    <i class="fas fa-sign-in-alt"></i> Acessar Painel
                </button>
            </div>
            
            <div class="login-footer">
                <p><i class="fas fa-lock"></i> Acesso restrito ao administrador</p>
                <p>Contato: claudioarmando001@gmail.com</p>
            </div>
        </div>
    </div>

    <!-- PAINEL ADMIN (ap√≥s login) -->
    <div id="admin-panel">
        <header class="admin-header">
            <div class="admin-header-content">
                <div class="admin-logo">
                    <i class="fas fa-cogs"></i>
                    <span>Painel Administrativo</span>
                </div>
                <div class="admin-actions">
                    <a href="index.html" class="back-btn">
                        <i class="fas fa-arrow-left"></i> Voltar ao Site
                    </a>
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </header>
     <div class="admin-container">
            <!-- MENSAGENS -->
            <div id="admin-message" class="message"></div>

            <!-- TABS -->
            <div class="admin-tabs">
                <button class="tab-btn active" onclick="showTab('dashboard')">
                    <i class="fas fa-chart-line"></i> Dashboard
                </button>
                <button class="tab-btn" onclick="showTab('sources')">
                    <i class="fas fa-newspaper"></i> Fontes
                </button>
                <button class="tab-btn" onclick="showTab('saved')">
                    <i class="fas fa-save"></i> Not√≠cias Guardadas
                </button>
                <button class="tab-btn" onclick="showTab('settings')">
                    <i class="fas fa-cog"></i> Configura√ß√µes
                </button>
                <button class="tab-btn" onclick="showTab('tools')">
                    <i class="fas fa-tools"></i> Ferramentas
                </button>
            </div>

            <!-- DASHBOARD -->
            <div id="dashboard-tab" class="tab-content active">
                <div class="stats-section">
                    <h2 class="stats-title">
                        <i class="fas fa-tachometer-alt"></i> Vis√£o Geral do Sistema
                    </h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                <span class="stat-trend positive">+12%</span>
                            </div>
                            <div class="stat-content">
                                <h3>Total de Not√≠cias</h3>
                                <div class="stat-number" id="stat-total-news">0</div>
                                <p class="stat-desc">Not√≠cias agregadas de todas as fontes</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <i class="fas fa-save"></i>
                                </div>
                                <span class="stat-trend positive">+8%</span>
                            </div>
                            <div class="stat-content">
                                <h3>Not√≠cias Guardadas</h3>
                                <div class="stat-number" id="stat-saved-news">0</div>
                                <p class="stat-desc">Not√≠cias salvas como nativas</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <span class="stat-trend positive">+3%</span>
                            </div>
                            <div class="stat-content">
                                <h3>Fontes Ativas</h3>
                                <div class="stat-number" id="stat-active-sources">0</div>
                                <p class="stat-desc">Fontes de not√≠cias configuradas</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <i class="fas fa-chart-pie"></i>
                                </div>
                                <span class="stat-trend positive">+15%</span>
                            </div>
                            <div class="stat-content">
                                <h3>Categorias</h3>
                                <div class="stat-number">7</div>
                                <p class="stat-desc">Categorias de not√≠cias dispon√≠veis</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sources-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-sync-alt"></i> Status das Fontes
                        </h2>
                        <div class="section-actions">
                            <button class="action-btn primary" onclick="refreshAllSources()">
                                <i class="fas fa-sync-alt"></i> Atualizar Tudo
                            </button>
                        </div>
                    </div>
                    
                    <div id="sources-status">
                        <!-- Status das fontes ser√° carregado aqui -->
                    </div>
                </div>
            </div>

            <!-- FONTES -->
            <div id="sources-tab" class="tab-content">
                <div class="sources-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-newspaper"></i> Gerenciar Fontes
                        </h2>
                        <div class="section-actions">
                            <button class="action-btn success" onclick="showAddSourceForm()">
                                <i class="fas fa-plus"></i> Nova Fonte
                            </button>
                        </div>
                    </div>

                    <!-- FORMUL√ÅRIO DE ADI√á√ÉO -->
                    <div id="add-source-form" class="form-section" style="display: none;">
                        <h3 style="color: var(--dark); margin-bottom: 25px;">
                            <i class="fas fa-plus-circle"></i> Adicionar Nova Fonte
                        </h3>
                        
                        <div class="form-row">
                            <div class="form-control">
                                <label>Nome da Fonte *</label>
                                <input type="text" id="source-name" placeholder="Ex: O Pa√≠s Mo√ßambique" required>
                            </div>
                            <div class="form-control">
                                <label>URL da API *</label>
                                <input type="url" id="source-url" 
                                       placeholder="https://www.opais.co.mz/wp-json/wp/v2/posts" required>
                                <small style="color: #666; display: block; margin-top: 8px;">
                                    Deve ser uma API WordPress (/wp-json/wp/v2/posts)
                                </small>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-control">
                                <label>Linguagem</label>
                                <select id="source-lang">
                                    <option value="pt">Portugu√™s</option>
                                    <option value="en">Ingl√™s</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label>Limite de Not√≠cias</label>
                                <input type="number" id="source-limit" min="1" max="50" value="10">
                            </div>
                        </div>
                        
                        <div class="form-control">
                            <div class="checkbox-group">
                                <input type="checkbox" id="source-enabled" checked>
                                <label for="source-enabled">Fonte ativa</label>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 30px;">
                            <button class="action-btn success" onclick="addSource()">
                                <i class="fas fa-check"></i> Salvar Fonte
                            </button>
                            <button class="action-btn" onclick="hideAddSourceForm()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>

                    <!-- LISTA DE FONTES -->
                    <h3 style="color: var(--dark); margin: 40px 0 25px;">
                        <i class="fas fa-list"></i> Fontes Configuradas
                    </h3>
                    
                    <div id="sources-list" class="sources-list">
                        <!-- Fontes ser√£o carregadas aqui -->
                    </div>
                </div>
            </div>
      <!-- NOT√çCIAS GUARDADAS -->
            <div id="saved-tab" class="tab-content">
                <div class="saved-news-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-save"></i> Not√≠cias Guardadas
                        </h2>
                        <div class="section-actions">
                            <button class="action-btn warning" onclick="exportSavedNews()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                            <button class="action-btn danger" onclick="confirmClearSaved()">
                                <i class="fas fa-trash"></i> Limpar Tudo
                            </button>
                        </div>
                    </div>

                    <div class="search-box">
                        <input type="text" 
                               id="search-saved" 
                               class="search-input" 
                               placeholder="üîç Buscar not√≠cias guardadas..."
                               onkeyup="searchSavedNews()">
                    </div>

                    <div id="saved-news-list" class="saved-list">
                        <!-- Not√≠cias guardadas ser√£o carregadas aqui -->
                    </div>
                </div>
            </div>

            <!-- CONFIGURA√á√ïES -->
            <div id="settings-tab" class="tab-content">
                <div class="settings-section">
                    <h2 class="section-title" style="margin-bottom: 40px;">
                        <i class="fas fa-cog"></i> Configura√ß√µes do Sistema
                    </h2>

                    <div class="settings-grid">
                        <div class="setting-group">
                            <h3><i class="fas fa-sync-alt"></i> Atualiza√ß√£o</h3>
                            <div class="form-control">
                                <label>Intervalo (minutos)</label>
                                <input type="number" id="update-interval" min="5" max="120" value="30">
                            </div>
                            <div class="form-control">
                                <label>Not√≠cias por P√°gina</label>
                                <input type="number" id="per-page" min="10" max="50" value="15">
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="auto-refresh" checked>
                                <label for="auto-refresh">Atualiza√ß√£o autom√°tica</label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3><i class="fas fa-database"></i> Cache</h3>
                            <div class="checkbox-group">
                                <input type="checkbox" id="cache-enabled" checked>
                                <label for="cache-enabled">Usar cache</label>
                            </div>
                            <div class="form-control">
                                <label>Tempo de Cache (horas)</label>
                                <input type="number" id="cache-time" min="1" max="24" value="6">
                            </div>
                            <button class="action-btn warning" onclick="clearCache()" style="margin-top: 20px;">
                                <i class="fas fa-broom"></i> Limpar Cache
                            </button>
                        </div>

                        <div class="setting-group">
                            <h3><i class="fas fa-user-shield"></i> Seguran√ßa</h3>
                            <div class="form-control">
                                <label>Senha Admin</label>
                                <input type="password" id="admin-pass" value="0800" maxlength="4">
                                <small style="color: #666;">Senha atual: 0800</small>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="require-login">
                                <label for="require-login">Exigir login para guardar</label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3><i class="fas fa-paint-brush"></i> Apar√™ncia</h3>
                            <div class="form-control">
                                <label>Tema</label>
                                <select id="theme">
                                    <option value="light">Claro</option>
                                    <option value="dark">Escuro</option>
                                    <option value="auto">Autom√°tico</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label>Cor Prim√°ria</label>
                                <input type="color" id="primary-color" value="#1a73e8">
                            </div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 50px;">
                        <button class="action-btn primary" onclick="saveSettings()" style="padding: 18px 50px;">
                            <i class="fas fa-save"></i> Salvar Todas as Configura√ß√µes
                        </button>
                    </div>
                </div>
            </div>

            <!-- FERRAMENTAS -->
            <div id="tools-tab" class="tab-content">
                <div class="sources-section">
                    <h2 class="section-title" style="margin-bottom: 40px;">
                        <i class="fas fa-tools"></i> Ferramentas Avan√ßadas
                    </h2>

                    <div class="stats-grid">
                        <div class="stat-card" onclick="exportAllData()" style="cursor: pointer;">
                            <div class="stat-icon">
                                <i class="fas fa-file-export"></i>
                            </div>
                            <div class="stat-content">
                                <h3>Exportar Dados</h3>
                                <p class="stat-desc">Exportar todas as configura√ß√µes e not√≠cias</p>
                            </div>
                        </div>

                        <div class="stat-card" onclick="importAllData()" style="cursor: pointer;">
                            <div class="stat-icon">
                                <i class="fas fa-file-import"></i>
                            </div>
                            <div class="stat-content">
                                <h3>Importar Dados</h3>
                                <p class="stat-desc">Importar configura√ß√µes de backup</p>
                            </div>
                        </div>

                        <div class="stat-card" onclick="optimizeDatabase()" style="cursor: pointer;">
                            <div class="stat-icon">
                                <i class="fas fa-compress-arrows-alt"></i>
                            </div>
                            <div class="stat-content">
                                <h3>Otimizar Base</h3>
                                <p class="stat-desc">Limpar e otimizar dados locais</p>
                            </div>
                        </div>

                        <div class="stat-card" onclick="showSystemInfo()" style="cursor: pointer;">
                            <div class="stat-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3>Informa√ß√µes</h3>
                                <p class="stat-desc">Informa√ß√µes do sistema e vers√£o</p>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 50px; text-align: center;">
                        <button class="action-btn danger" onclick="resetSystem()">
                            <i class="fas fa-redo"></i> Resetar Sistema Completo
                        </button>
                        <small style="display: block; color: #f44336; margin-top: 15px;">
                            Aten√ß√£o: Esta a√ß√£o ir√° remover todas as configura√ß√µes e dados!
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL DE CONFIRMA√á√ÉO -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <h3 class="modal-title" id="modal-title">Confirmar A√ß√£o</h3>
            <div class="modal-content" id="modal-content"></div>
            <div class="modal-actions">
                <button class="action-btn" onclick="closeModal()">Cancelar</button>
                <button class="action-btn danger" id="modal-confirm">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
    // SENHA DO ADMIN
    const ADMIN_PASSWORD = "0800";
    let isAuthenticated = false;

    // ELEMENTOS DOM
    const loginScreen = document.getElementById('login-screen');
    const adminPanel = document.getElementById('admin-panel');
    const passwordInput = document.getElementById('admin-password');
    const loginError = document.getElementById('login-error');
    const messageEl = document.getElementById('admin-message');
    const modal = document.getElementById('confirm-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalContent = document.getElementById('modal-content');
    const modalConfirm = document.getElementById('modal-confirm');

    // VARI√ÅVEIS
    let pendingAction = null;

    // LOGIN
    function login() {
        const password = passwordInput.value.trim();
        
        if (password === ADMIN_PASSWORD) {
            isAuthenticated = true;
            loginScreen.style.display = 'none';
            adminPanel.style.display = 'block';
            loginError.style.display = 'none';
            passwordInput.value = '';
            
            // Carrega dados do painel
            loadDashboard();
            loadSources();
            loadSavedNews();
            loadSettings();
            
            showMessage('Login realizado com sucesso!', 'success');
            
            // Atalho de teclado para logout (Ctrl + L)
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'l') {
                    e.preventDefault();
                    logout();
                }
            });
            
        } else {
            loginError.style.display = 'block';
            passwordInput.focus();
            passwordInput.select();
            
            // Efeito de erro
            passwordInput.style.animation = 'none';
            setTimeout(() => {
                passwordInput.style.animation = 'shake 0.5s';
            }, 10);
        }
    }

    // LOGOUT
    function logout() {
        isAuthenticated = false;
        adminPanel.style.display = 'none';
        loginScreen.style.display = 'flex';
        showMessage('Voc√™ saiu do painel administrativo.', 'info');
    }

    // ATALHO DE ENTER NO LOGIN
    passwordInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            login();
        }
    });

    // MENSAGENS
    function showMessage(text, type = 'success') {
        messageEl.textContent = text;
        messageEl.className = `message ${type}`;
        messageEl.style.display = 'block';
        
        setTimeout(() => {
            messageEl.style.display = 'none';
        }, 5000);
    }

    // MODAL
    function showModal(title, content, callback) {
        modalTitle.textContent = title;
        modalContent.innerHTML = content;
        pendingAction = callback;
        modal.style.display = 'flex';
        
        modalConfirm.onclick = () => {
            if (pendingAction) {
                pendingAction();
            }
            closeModal();
        };
    }

    function closeModal() {
        modal.style.display = 'none';
        pendingAction = null;
    }

    // TABS
    function showTab(tabName) {
        // Remove active de todas as tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        
        // Adiciona active na tab clicada
        event.target.classList.add('active');
        document.getElementById(`${tabName}-tab`).classList.add('active');
    }

    // DASHBOARD
    function loadDashboard() {
        // Estat√≠sticas
        const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const allNews = JSON.parse(localStorage.getItem('all_news_cache') || '[]');
        
        document.getElementById('stat-total-news').textContent = allNews.length;
        document.getElementById('stat-saved-news').textContent = savedNews.length;
        document.getElementById('stat-active-sources').textContent = sources.filter(s => s.enabled).length;
        
        // Status das fontes
        updateSourcesStatus();
    }

    function updateSourcesStatus() {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const container = document.getElementById('sources-status');
        
        let html = '';
        sources.forEach(source => {
            const status = source.enabled ? 'active' : 'inactive';
            const statusText = source.enabled ? 'Ativa' : 'Inativa';
            const statusIcon = source.enabled ? 'fa-check-circle' : 'fa-times-circle';
            
            html += `
            <div class="source-item">
                <div class="source-item-header">
                    <div class="source-info">
                        <h3><i class="fas fa-newspaper"></i> ${source.name}</h3>
                        <p>${source.url}</p>
                    </div>
                    <span class="source-status status-${status}">
                        <i class="fas ${statusIcon}"></i> ${statusText}
                    </span>
                </div>
                <div class="source-actions">
                    <button class="source-btn toggle" onclick="toggleSource('${source.name}')">
                        <i class="fas fa-power-off"></i> ${source.enabled ? 'Desativar' : 'Ativar'}
                    </button>
                    <button class="source-btn edit" onclick="editSource('${source.name}')">
                        <i class="fas fa-edit"></i> Editar
                    </button>
                    <button class="source-btn delete" onclick="deleteSource('${source.name}')">
                        <i class="fas fa-trash"></i> Remover
                    </button>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html || '<p style="text-align: center; color: #666;">Nenhuma fonte configurada</p>';
    }

    function refreshAllSources() {
        showMessage('Atualizando todas as fontes...', 'info');
        
        // Simula atualiza√ß√£o
        setTimeout(() => {
            showMessage('Fontes atualizadas com sucesso!', 'success');
            loadDashboard();
        }, 2000);
    }
    // GERENCIAR FONTES
    function showAddSourceForm() {
        document.getElementById('add-source-form').style.display = 'block';
        document.getElementById('source-name').focus();
    }

    function hideAddSourceForm() {
        document.getElementById('add-source-form').style.display = 'none';
        clearSourceForm();
    }

    function clearSourceForm() {
        document.getElementById('source-name').value = '';
        document.getElementById('source-url').value = '';
        document.getElementById('source-lang').value = 'pt';
        document.getElementById('source-limit').value = '10';
        document.getElementById('source-enabled').checked = true;
    }

    function loadSources() {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const container = document.getElementById('sources-list');
        
        if (sources.length === 0) {
            container.innerHTML = `
            <div style="text-align: center; padding: 50px; color: #666; background: #f8f9fa; border-radius: 15px;">
                <i class="fas fa-newspaper" style="font-size: 48px; opacity: 0.3; margin-bottom: 20px;"></i>
                <h3>Nenhuma fonte configurada</h3>
                <p>Adicione sua primeira fonte de not√≠cias</p>
                <button class="action-btn success" onclick="showAddSourceForm()" style="margin-top: 20px;">
                    <i class="fas fa-plus"></i> Adicionar Primeira Fonte
                </button>
            </div>
            `;
            return;
        }
        
        let html = '';
        sources.forEach(source => {
            html += `
            <div class="source-item">
                <div class="source-item-header">
                    <div class="source-info">
                        <h3><i class="fas fa-newspaper"></i> ${source.name}</h3>
                        <p>${source.url}</p>
                        <div style="display: flex; gap: 15px; margin-top: 10px; font-size: 14px;">
                            <span style="color: #666;">
                                <i class="fas fa-language"></i> ${source.lang || 'pt'}
                            </span>
                            <span style="color: #666;">
                                <i class="fas fa-filter"></i> ${source.limit || 10} not√≠cias
                            </span>
                        </div>
                    </div>
                    <span class="source-status ${source.enabled ? 'status-active' : 'status-inactive'}">
                        <i class="fas fa-${source.enabled ? 'check' : 'times'}-circle"></i>
                        ${source.enabled ? 'Ativa' : 'Inativa'}
                    </span>
                </div>
                <div class="source-actions">
                    <button class="source-btn toggle" onclick="toggleSource('${source.name}')">
                        <i class="fas fa-power-off"></i> ${source.enabled ? 'Desativar' : 'Ativar'}
                    </button>
                    <button class="source-btn edit" onclick="editSource('${source.name}')">
                        <i class="fas fa-edit"></i> Editar
                    </button>
                    <button class="source-btn delete" onclick="deleteSource('${source.name}')">
                        <i class="fas fa-trash"></i> Remover
                    </button>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }

    function addSource() {
        const name = document.getElementById('source-name').value.trim();
        const url = document.getElementById('source-url').value.trim();
        const lang = document.getElementById('source-lang').value;
        const limit = parseInt(document.getElementById('source-limit').value);
        const enabled = document.getElementById('source-enabled').checked;
        
        if (!name || !url) {
            showMessage('Preencha todos os campos obrigat√≥rios!', 'error');
            return;
        }
        
        if (!url.includes('/wp-json/wp/v2/posts')) {
            showMessage('URL deve ser uma API WordPress v√°lida!', 'error');
            return;
        }
        
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        
        // Verifica se j√° existe
        if (sources.some(s => s.url === url)) {
            showMessage('Esta fonte j√° est√° configurada!', 'error');
            return;
        }
        
        sources.push({
            name,
            url,
            lang,
            limit,
            enabled,
            lastUpdate: new Date().toISOString()
        });
        
        localStorage.setItem('news_sources', JSON.stringify(sources));
        
        hideAddSourceForm();
        loadSources();
        loadDashboard();
        
        showMessage(`Fonte "${name}" adicionada com sucesso!`, 'success');
    }

    function toggleSource(sourceName) {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const sourceIndex = sources.findIndex(s => s.name === sourceName);
        
        if (sourceIndex !== -1) {
            sources[sourceIndex].enabled = !sources[sourceIndex].enabled;
            localStorage.setItem('news_sources', JSON.stringify(sources));
            
            loadSources();
            loadDashboard();
            
            showMessage(
                `Fonte "${sourceName}" ${sources[sourceIndex].enabled ? 'ativada' : 'desativada'}!`,
                sources[sourceIndex].enabled ? 'success' : 'warning'
            );
        }
    }

    function editSource(sourceName) {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const source = sources.find(s => s.name === sourceName);
        
        if (!source) return;
        
        // Preenche o formul√°rio
        document.getElementById('source-name').value = source.name;
        document.getElementById('source-url').value = source.url;
        document.getElementById('source-lang').value = source.lang || 'pt';
        document.getElementById('source-limit').value = source.limit || 10;
        document.getElementById('source-enabled').checked = source.enabled;
        
        // Remove da lista
        sources.splice(sources.findIndex(s => s.name === sourceName), 1);
        localStorage.setItem('news_sources', JSON.stringify(sources));
    // Mostra formul√°rio
        showAddSourceForm();
        loadSources();
        
        showMessage(`Editando fonte "${sourceName}"`, 'info');
    }

    function deleteSource(sourceName) {
        showModal(
            'Remover Fonte',
            `Tem certeza que deseja remover a fonte <strong>"${sourceName}"</strong>?`,
            () => {
                const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
                const filtered = sources.filter(s => s.name !== sourceName);
                
                localStorage.setItem('news_sources', JSON.stringify(filtered));
                
                loadSources();
                loadDashboard();
                
                showMessage(`Fonte "${sourceName}" removida com sucesso!`, 'success');
            }
        );
    }

    // NOT√çCIAS GUARDADAS
    function loadSavedNews() {
        const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const container = document.getElementById('saved-news-list');
        
        if (savedNews.length === 0) {
            container.innerHTML = `
            <div style="text-align: center; padding: 50px; color: #666; background: #f8f9fa; border-radius: 15px;">
                <i class="fas fa-save" style="font-size: 48px; opacity: 0.3; margin-bottom: 20px;"></i>
                <h3>Nenhuma not√≠cia guardada</h3>
                <p>As not√≠cias guardadas aparecer√£o aqui</p>
            </div>
            `;
            return;
        }
        
        let html = '';
        savedNews.forEach((news, index) => {
            const date = new Date(news.savedDate || news.date).toLocaleDateString('pt-PT');
            
            html += `
            <div class="saved-item">
                <div class="saved-item-header">
                    <div class="saved-title">${news.title}</div>
                    <button class="source-btn delete" onclick="deleteSavedNews(${index})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="saved-meta">
                    <span><i class="fas fa-newspaper"></i> ${news.source}</span>
                    <span><i class="far fa-clock"></i> ${date}</span>
                    <span><i class="fas fa-tag"></i> ${news.categoryName || news.category}</span>
                </div>
                <div class="saved-actions">
                    <button class="source-btn" onclick="viewSavedNews('${news.id}')">
                        <i class="fas fa-eye"></i> Ver
                    </button>
                    <button class="source-btn edit" onclick="editSavedNews(${index})">
                        <i class="fas fa-edit"></i> Editar
                    </button>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }

    function searchSavedNews() {
        const query = document.getElementById('search-saved').value.toLowerCase();
        const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const container = document.getElementById('saved-news-list');
        
        if (!query) {
            loadSavedNews();
            return;
        }
        
        const filtered = savedNews.filter(news => 
            news.title.toLowerCase().includes(query) || 
            news.source.toLowerCase().includes(query) ||
            (news.category && news.category.toLowerCase().includes(query))
        );
        
        if (filtered.length === 0) {
            container.innerHTML = `
            <div style="text-align: center; padding: 50px; color: #666;">
                <i class="fas fa-search" style="font-size: 48px; opacity: 0.3;"></i>
                <p>Nenhuma not√≠cia encontrada</p>
            </div>
            `;
            return;
        }
        
        let html = '';
        filtered.forEach((news, index) => {
            const date = new Date(news.savedDate || news.date).toLocaleDateString('pt-PT');
            
            html += `
            <div class="saved-item">
                <div class="saved-item-header">
                    <div class="saved-title">${news.title}</div>
                    <button class="source-btn delete" onclick="deleteSavedNews(${savedNews.findIndex(n => n.id === news.id)})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="saved-meta">
                    <span><i class="fas fa-newspaper"></i> ${news.source}</span>
                    <span><i class="far fa-clock"></i> ${date}</span>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }

    function viewSavedNews(id) {
        window.open(`leitura.html?id=${id}`, '_blank');
    }

    function editSavedNews(index) {
        const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const news = savedNews[index];
        
        const newTitle = prompt('Editar t√≠tulo:', news.title);
        if (newTitle && newTitle.trim()) {
            savedNews[index].title = newTitle.trim();
            localStorage.setItem('saved_news', JSON.stringify(savedNews));
            loadSavedNews();
            showMessage('T√≠tulo atualizado com sucesso!', 'success');
        }
    }

    function deleteSavedNews(index) {
        showModal(
            'Remover Not√≠cia',
            'Tem certeza que deseja remover esta not√≠cia guardada?',
            () => {
                const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
                savedNews.splice(index, 1);
                localStorage.setItem('saved_news', JSON.stringify(savedNews));
                
                loadSavedNews();
                loadDashboard();
                
                showMessage('Not√≠cia removida com sucesso!', 'success');
            }
        );
    }

    function exportSavedNews() {
        const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const dataStr = JSON.stringify(savedNews, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
        
        const exportFileDefaultName = `noticias-guardadas-${new Date().toISOString().split('T')[0]}.json`;
        
        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute('download', exportFileDefaultName);
        linkElement.click();
        
        showMessage('Not√≠cias exportadas com sucesso!', 'success');
    }

    function confirmClearSaved() {
        showModal(
            'Limpar Todas as Not√≠cias',
            '<p style="color: #f44336; font-weight: bold;">ATEN√á√ÉO!</p>' +
            '<p>Todas as not√≠cias guardadas ser√£o permanentemente removidas.</p>' +
            '<p>Esta a√ß√£o n√£o pode ser desfeita!</p>',
            () => {
                localStorage.removeItem('saved_news');
                loadSavedNews();
                loadDashboard();
                showMessage('Todas as not√≠cias guardadas foram removidas!', 'success');
            }
        );
    }
    // CONFIGURA√á√ïES
    function loadSettings() {
        const settings = JSON.parse(localStorage.getItem('news_settings') || '{}');
        
        // Preenche os campos
        document.getElementById('update-interval').value = settings.updateInterval || 30;
        document.getElementById('per-page').value = settings.perPage || 15;
        document.getElementById('auto-refresh').checked = settings.autoRefresh !== false;
        document.getElementById('cache-enabled').checked = settings.cacheEnabled !== false;
        document.getElementById('cache-time').value = settings.cacheTime || 6;
        document.getElementById('admin-pass').value = settings.adminPassword || '0800';
        document.getElementById('require-login').checked = settings.requireLogin || false;
        document.getElementById('theme').value = settings.theme || 'light';
        document.getElementById('primary-color').value = settings.primaryColor || '#1a73e8';
    }

    function saveSettings() {
        const settings = {
            updateInterval: parseInt(document.getElementById('update-interval').value) || 30,
            perPage: parseInt(document.getElementById('per-page').value) || 15,
            autoRefresh: document.getElementById('auto-refresh').checked,
            cacheEnabled: document.getElementById('cache-enabled').checked,
            cacheTime: parseInt(document.getElementById('cache-time').value) || 6,
            adminPassword: document.getElementById('admin-password').value || '0800',
            requireLogin: document.getElementById('require-login').checked,
            theme: document.getElementById('theme').value,
            primaryColor: document.getElementById('primary-color').value,
            lastModified: new Date().toISOString()
        };
        
        localStorage.setItem('news_settings', JSON.stringify(settings));
        
        showMessage('Configura√ß√µes salvas com sucesso!', 'success');
    }

    function clearCache() {
        // Remove todos os caches de not√≠cias
        Object.keys(localStorage).forEach(key => {
            if (key.includes('news_cache') || key.includes('all_news')) {
                localStorage.removeItem(key);
            }
        });
        
        showMessage('Cache limpo com sucesso!', 'success');
    }

    // FERRAMENTAS
    function exportAllData() {
        const data = {
            sources: JSON.parse(localStorage.getItem('news_sources') || '[]'),
            saved: JSON.parse(localStorage.getItem('saved_news') || '[]'),
            settings: JSON.parse(localStorage.getItem('news_settings') || '{}'),
            cache: JSON.parse(localStorage.getItem('all_news_cache') || '[]'),
            exportDate: new Date().toISOString(),
            version: '1.0.0'
        };
        
        const dataStr = JSON.stringify(data, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
        const exportName = `backup-noticias-cld-${new Date().toISOString().split('T')[0]}.json`;
        
        const link = document.createElement('a');
        link.setAttribute('href', dataUri);
        link.setAttribute('download', exportName);
        link.click();
        
        showMessage('Backup completo exportado com sucesso!', 'success');
    }

    function importAllData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    if (!data.version) {
                        throw new Error('Arquivo inv√°lido');
                    }
                    
                    showModal(
                        'Importar Backup',
                        `<p>Tem certeza que deseja importar este backup?</p>
                         <p><strong>Data do backup:</strong> ${new Date(data.exportDate).toLocaleString()}</p>
                         <p><strong>Fontes:</strong> ${data.sources?.length || 0}</p>
                         <p><strong>Not√≠cias guardadas:</strong> ${data.saved?.length || 0}</p>`,
                        () => {
                            if (data.sources) localStorage.setItem('news_sources', JSON.stringify(data.sources));
                            if (data.saved) localStorage.setItem('saved_news', JSON.stringify(data.saved));
                            if (data.settings) localStorage.setItem('news_settings', JSON.stringify(data.settings));
                            if (data.cache) localStorage.setItem('all_news_cache', JSON.stringify(data.cache));
                            
                            // Recarrega tudo
                            loadDashboard();
                            loadSources();
                            loadSavedNews();
                            loadSettings();
                            
                            showMessage('Backup importado com sucesso!', 'success');
                        }
                    );
                } catch (error) {
                    showMessage('Erro ao importar backup. Arquivo inv√°lido!', 'error');
                }
            };
            
            reader.readAsText(file);
        };
        
        input.click();
    }

    function optimizeDatabase() {
        showModal(
            'Otimizar Base de Dados',
            'Esta a√ß√£o ir√° remover not√≠cias duplicadas e otimizar o armazenamento.',
            () => {
                // Remove duplicatas das not√≠cias salvas
                const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
                const uniqueSaved = savedNews.filter((news, index, self) =>
                    index === self.findIndex((n) => n.id === news.id)
                );
                localStorage.setItem('saved_news', JSON.stringify(uniqueSaved));
                
                // Limpa cache antigo
                const oneDayAgo = Date.now() - (24 * 60 * 60 * 1000);
                Object.keys(localStorage).forEach(key => {
                    if (key.startsWith('news_')) {
                        try {
                            const timestamp = localStorage.getItem(`${key}_timestamp`);
                            if (timestamp && parseInt(timestamp) < oneDayAgo) {
                                localStorage.removeItem(key);
                                localStorage.removeItem(`${key}_timestamp`);
                            }
                        } catch (e) {
                            // Ignora erros
                        }
                    }
                });
                
                showMessage('Base de dados otimizada com sucesso!', 'success');
                loadDashboard();
                loadSavedNews();
            }
        );
    }

    function showSystemInfo() {
        const savedNews = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const allNews = JSON.parse(localStorage.getItem('all_news_cache') || '[]');
        
        const info = `
        <div style="text-align: left; line-height: 1.8;">
            <p><strong>Vers√£o do Sistema:</strong> 1.0.0</p>
            <p><strong>Total de Fontes:</strong> ${sources.length}</p>
            <p><strong>Fontes Ativas:</strong> ${sources.filter(s => s.enabled).length}</p>
            <p><strong>Not√≠cias Guardadas:</strong> ${savedNews.length}</p>
            <p><strong>Not√≠cias em Cache:</strong> ${allNews.length}</p>
            <p><strong>Armazenamento Usado:</strong> ${(JSON.stringify(localStorage).length / 1024).toFixed(2)} KB</p>
            <p><strong>√öltima Atualiza√ß√£o:</strong> ${new Date().toLocaleString()}</p>
            <hr>
            <p><small>Not√≠cias CLD - Sistema de Agrega√ß√£o</small></p>
        </div>
        `;
        
        showModal('Informa√ß√µes do Sistema', info, null);
    }

    function resetSystem() {
        showModal(
            'Resetar Sistema Completo',
            `<div style="color: #f44336; text-align: center;">
                <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 20px;"></i>
                <h3 style="color: #f44336;">ATEN√á√ÉO EXTREMA!</h3>
                <p>Todas as configura√ß√µes e dados ser√£o permanentemente removidos.</p>
                <p>Incluindo:</p>
                <ul style="text-align: left; margin: 15px 0;">
                    <li>Todas as fontes configuradas</li>
                    <li>Todas as not√≠cias guardadas</li>
                    <li>Todas as configura√ß√µes</li>
                    <li>Todos os caches</li>
                </ul>
                <p><strong>Esta a√ß√£o n√£o pode ser desfeita!</strong></p>
                <p>Digite <code>CONFIRMAR</code> abaixo para prosseguir:</p>
                <input type="text" id="reset-confirm" style="width: 100%; padding: 10px; margin: 15px 0; border: 2px solid #f44336; border-radius: 5px; text-align: center;" placeholder="Digite CONFIRMAR">
            </div>`,
            () => {
                const confirmInput = document.getElementById('reset-confirm');
                if (confirmInput && confirmInput.value === 'CONFIRMAR') {
                    // Limpa tudo
                    localStorage.clear();
                    
                    // Mostra mensagem e recarrega
                    showMessage('Sistema completamente resetado!', 'success');
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } else {
                    showMessage('Confirma√ß√£o incorreta! Opera√ß√£o cancelada.', 'error');
                }
            }
        );
    }
    // ANIMA√á√ÉO DE SHAKE
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    `;
    document.head.appendChild(style);

    // VERIFICA SE J√Å EST√Å LOGADO (em caso de refresh)
    window.addEventListener('load', () => {
        const lastLogin = localStorage.getItem('admin_last_login');
        const now = Date.now();
        
        // Se fez login nos √∫ltimos 30 minutos, mant√©m logado
        if (lastLogin && (now - parseInt(lastLogin)) < 30 * 60 * 1000) {
            isAuthenticated = true;
            loginScreen.style.display = 'none';
            adminPanel.style.display = 'block';
            loadDashboard();
            loadSources();
            loadSavedNews();
            loadSettings();
        } else {
            localStorage.removeItem('admin_last_login');
        }
    });

    // SALVA TIMESTAMP DO LOGIN
    function saveLoginTimestamp() {
        localStorage.setItem('admin_last_login', Date.now().toString());
    }

    // ATUALIZA TIMESTAMP QUANDO INTERAGE COM A P√ÅGINA
    document.addEventListener('click', saveLoginTimestamp);
    document.addEventListener('keypress', saveLoginTimestamp);
    </script>
</body>
</html>