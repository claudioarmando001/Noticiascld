<!doctype html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Painel Admin - Not√≠cias CLD</title>
    <style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 10px;
        padding: 30px;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #1a73e8;
    }

    .back-btn {
        background: #1a73e8;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .back-btn:hover {
        background: #0d62d9;
    }

    .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        border-bottom: 1px solid #ddd;
        padding-bottom: 10px;
    }

    .tab {
        padding: 10px 20px;
        background: #f0f0f0;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s;
    }

    .tab.active {
        background: #1a73e8;
        color: white;
    }

    .tab:hover:not(.active) {
        background: #e0e0e0;
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
    }

    /* FORMUL√ÅRIOS */
    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
        color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        box-sizing: border-box;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #1a73e8;
        box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
    }

    .btn {
        background: #1a73e8;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: all 0.3s;
    }

    .btn:hover {
        background: #0d62d9;
        transform: translateY(-2px);
    }

    .btn-danger {
        background: #d32f2f;
    }

    .btn-danger:hover {
        background: #b71c1c;
    }

    .btn-success {
        background: #4caf50;
    }

    .btn-success:hover {
        background: #388e3c;
    }

    /* LISTAS */
    .list-container {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        max-height: 500px;
        overflow-y: auto;
    }

    .list-item {
        background: white;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 15px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .list-item:hover {
        border-color: #1a73e8;
        box-shadow: 0 2px 8px rgba(26, 115, 232, 0.1);
    }

    .item-info h3 {
        margin: 0 0 5px 0;
        color: #333;
    }

    .item-info p {
        margin: 0;
        color: #666;
        font-size: 14px;
    }

    .item-actions {
        display: flex;
        gap: 10px;
    }

    .action-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
    }

    .edit-btn {
        background: #ff9800;
        color: white;
    }

    .delete-btn {
        background: #f44336;
        color: white;
    }

    .toggle-btn {
        background: #4caf50;
        color: white;
    }

    .toggle-btn.disabled {
        background: #9e9e9e;
    }

    /* ESTAT√çSTICAS */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        border-radius: 8px;
        padding: 20px;
        border-left: 4px solid #1a73e8;
        box-shadow: 0 2px 5px rgba(0,0,0,0.08);
    }

    .stat-card h3 {
        margin: 0 0 10px 0;
        color: #666;
        font-size: 14px;
        text-transform: uppercase;
    }

    .stat-number {
        font-size: 32px;
        font-weight: bold;
        color: #1a73e8;
        margin: 0;
    }

    /* MENSAGENS */
    .message {
        padding: 15px;
        border-radius: 6px;
        margin: 15px 0;
        display: none;
    }

    .message.success {
        background: #e8f5e8;
        color: #2e7d32;
        border-left: 4px solid #4caf50;
    }

    .message.error {
        background: #ffebee;
        color: #c62828;
        border-left: 4px solid #f44336;
    }

    /* CHECKBOX */
    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .checkbox-group input[type="checkbox"] {
        width: auto;
    }

    /* MODAL */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        background: white;
        width: 90%;
        max-width: 500px;
        border-radius: 10px;
        padding: 30px;
        position: relative;
    }

    .modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: #666;
    }

    .modal-title {
        margin: 0 0 20px 0;
        color: #1a73e8;
    }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Painel Administrativo - Not√≠cias CLD</h1>
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i> Voltar ao Site
            </a>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('stats')">Estat√≠sticas</button>
            <button class="tab" onclick="showTab('sources')">Fontes</button>
            <button class="tab" onclick="showTab('saved')">Not√≠cias Guardadas</button>
            <button class="tab" onclick="showTab('settings')">Configura√ß√µes</button>
        </div>

        <!-- MENSAGENS -->
        <div id="message" class="message"></div>

        <!-- ABA: ESTAT√çSTICAS -->
        <div id="stats-tab" class="tab-content active">
            <h2>Estat√≠sticas do Sistema</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total de Fontes</h3>
                    <p class="stat-number" id="total-sources">0</p>
                </div>
                
                <div class="stat-card">
                    <h3>Fontes Ativas</h3>
                    <p class="stat-number" id="active-sources">0</p>
                </div>
                
                <div class="stat-card">
                    <h3>Not√≠cias Guardadas</h3>
                    <p class="stat-number" id="saved-articles">0</p>
                </div>
                
                <div class="stat-card">
                    <h3>√öltima Atualiza√ß√£o</h3>
                    <p class="stat-number" id="last-update">-</p>
                </div>
            </div>

            <div class="form-group">
                <button class="btn" onclick="refreshStats()">
                    <i class="fas fa-sync-alt"></i> Atualizar Estat√≠sticas
                </button>
                <button class="btn btn-danger" onclick="clearAllCache()">
                    <i class="fas fa-trash"></i> Limpar Cache
                </button>
            </div>
        </div>

        <!-- ABA: FONTES -->
        <div id="sources-tab" class="tab-content">
            <h2>Gerenciar Fontes de Not√≠cias</h2>
            
            <div class="form-group">
                <h3>Adicionar Nova Fonte</h3>
                <form id="add-source-form" onsubmit="return addSource(event)">
                    <div class="form-group">
                        <label>Nome da Fonte:</label>
                        <input type="text" id="source-name" required placeholder="Ex: O Pa√≠s">
                    </div>
                    
                    <div class="form-group">
                        <label>URL da API WordPress:</label>
                        <input type="url" id="source-url" required 
                               placeholder="Ex: https://www.opais.co.mz/wp-json/wp/v2/posts">
                        <small style="color: #666;">A URL deve terminar com /wp-json/wp/v2/posts</small>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="source-enabled" checked>
                        <label for="source-enabled">Fonte ativa</label>
                    </div>
                    
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-plus"></i> Adicionar Fonte
                    </button>
                </form>
            </div>

            <h3>Fontes Configuradas</h3>
            <div class="list-container" id="sources-list">
                <!-- Fontes ser√£o listadas aqui -->
            </div>
        </div>

        <!-- ABA: NOT√çCIAS GUARDADAS -->
        <div id="saved-tab" class="tab-content">
            <h2>Not√≠cias Guardadas</h2>
            <p>Total: <span id="saved-count">0</span> not√≠cias</p>
            
            <div class="form-group">
                <input type="text" id="search-saved" placeholder="üîç Buscar not√≠cias guardadas..." 
                       onkeyup="searchSavedArticles()" style="margin-bottom: 20px;">
            </div>
            
            <div class="list-container" id="saved-articles-list">
                <!-- Not√≠cias guardadas ser√£o listadas aqui -->
            </div>
        </div>

        <!-- ABA: CONFIGURA√á√ïES -->
        <div id="settings-tab" class="tab-content">
            <h2>Configura√ß√µes do Sistema</h2>
            
            <form id="settings-form" onsubmit="return saveSettings(event)">
                <div class="form-group">
                    <label>Intervalo de Atualiza√ß√£o (minutos):</label>
                    <input type="number" id="update-interval" min="5" max="120" value="30">
                </div>
                
                <div class="form-group">
                    <label>Not√≠cias por P√°gina:</label>
                    <input type="number" id="per-page" min="10" max="50" value="15">
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="auto-refresh" checked>
                    <label for="auto-refresh">Atualiza√ß√£o autom√°tica</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="cache-enabled" checked>
                    <label for="cache-enabled">Usar cache</label>
                </div>
                
                <div class="form-group">
                    <label>Email do Administrador:</label>
                    <input type="email" id="admin-email" value="claudioarmando001@gmail.com">
                </div>
                
                <button type="submit" class="btn">
                    <i class="fas fa-save"></i> Salvar Configura√ß√µes
                </button>
            </form>
            
            <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd;">
                <h3>A√ß√µes Avan√ßadas</h3>
                <button class="btn btn-danger" onclick="exportData()">
                    <i class="fas fa-download"></i> Exportar Dados
                </button>
                <button class="btn" onclick="importData()" style="margin-left: 10px;">
                    <i class="fas fa-upload"></i> Importar Dados
                </button>
                <button class="btn btn-danger" onclick="resetSystem()" style="margin-left: 10px;">
                    <i class="fas fa-redo"></i> Resetar Sistema
                </button>
            </div>
        </div>

        <!-- MODAL DE CONFIRMA√á√ÉO -->
        <div id="confirm-modal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">√ó</button>
                <h3 class="modal-title" id="modal-title">Confirmar A√ß√£o</h3>
                <p id="modal-message">Tem certeza que deseja realizar esta a√ß√£o?</p>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 30px;">
                    <button class="btn" onclick="closeModal()">Cancelar</button>
                    <button class="btn btn-danger" id="confirm-action">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
    // VARI√ÅVEIS
    let currentSourceIndex = -1;
    let pendingAction = null;

    // ELEMENTOS DOM
    const messageEl = document.getElementById('message');
    const modal = document.getElementById('confirm-modal');
    const confirmBtn = document.getElementById('confirm-action');

    // CONFIGURA√á√ïES PADR√ÉO
    const DEFAULT_SETTINGS = {
        updateInterval: 30,
        perPage: 15,
        autoRefresh: true,
        cacheEnabled: true,
        adminEmail: 'claudioarmando001@gmail.com'
    };

    // FUN√á√ïES DE TAB
    function showTab(tabName) {
        // Remove classe active de todas as tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
        });
        
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        
        // Ativa tab clicada
        event.target.classList.add('active');
        document.getElementById(`${tabName}-tab`).classList.add('active');
        
        // Atualiza conte√∫do se necess√°rio
        if (tabName === 'sources') {
            loadSources();
        } else if (tabName === 'saved') {
            loadSavedArticles();
        } else if (tabName === 'stats') {
            updateStats();
        }
    }

    // MENSAGENS
    function showMessage(text, type = 'success') {
        messageEl.textContent = text;
        messageEl.className = `message ${type}`;
        messageEl.style.display = 'block';
        
        setTimeout(() => {
            messageEl.style.display = 'none';
        }, 5000);
    }

    // MODAL
    function showModal(title, message, callback) {
        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-message').textContent = message;
        pendingAction = callback;
        modal.style.display = 'flex';
    }

    function closeModal() {
        modal.style.display = 'none';
        pendingAction = null;
    }

    confirmBtn.onclick = () => {
        if (pendingAction) {
            pendingAction();
        }
        closeModal();
    };

    // ESTAT√çSTICAS
    function updateStats() {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const saved = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const settings = JSON.parse(localStorage.getItem('news_settings') || JSON.stringify(DEFAULT_SETTINGS));
        
        document.getElementById('total-sources').textContent = sources.length;
        document.getElementById('active-sources').textContent = sources.filter(s => s.enabled).length;
        document.getElementById('saved-articles').textContent = saved.length;
        document.getElementById('last-update').textContent = new Date().toLocaleTimeString('pt-PT');
    }

    function refreshStats() {
        updateStats();
        showMessage('Estat√≠sticas atualizadas!');
    }

    // GERENCIAR FONTES
    function loadSources() {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const container = document.getElementById('sources-list');
        
        if (sources.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: #666;">Nenhuma fonte configurada</p>';
            return;
        }
        
        let html = '';
        sources.forEach((source, index) => {
            html += `
            <div class="list-item">
                <div class="item-info">
                    <h3>${source.name} ${source.enabled ? '‚úÖ' : '‚ùå'}</h3>
                    <p>${source.url}</p>
                </div>
                <div class="item-actions">
                    <button class="action-btn toggle-btn ${!source.enabled ? 'disabled' : ''}" 
                            onclick="toggleSource(${index})">
                        ${source.enabled ? 'Desativar' : 'Ativar'}
                    </button>
                    <button class="action-btn edit-btn" onclick="editSource(${index})">
                        Editar
                    </button>
                    <button class="action-btn delete-btn" onclick="deleteSource(${index})">
                        Remover
                    </button>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }

    function addSource(e) {
        e.preventDefault();
        
        const name = document.getElementById('source-name').value.trim();
        const url = document.getElementById('source-url').value.trim();
        const enabled = document.getElementById('source-enabled').checked;
        
        if (!name || !url) {
            showMessage('Preencha todos os campos!', 'error');
            return false;
        }
        
        // Valida URL da API WordPress
        if (!url.includes('/wp-json/wp/v2/posts')) {
            showMessage('URL deve ser uma API WordPress v√°lida!', 'error');
            return false;
        }
        
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        
        // Verifica se j√° existe
        if (sources.some(s => s.url === url)) {
            showMessage('Esta fonte j√° est√° configurada!', 'error');
            return false;
        }
        
        sources.push({ name, url, enabled });
        localStorage.setItem('news_sources', JSON.stringify(sources));
        
        // Limpa formul√°rio
        document.getElementById('add-source-form').reset();
        
        // Atualiza lista
           loadSources();
        updateStats();
        
        showMessage('Fonte adicionada com sucesso!');
        return false;
    }

    function toggleSource(index) {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        sources[index].enabled = !sources[index].enabled;
        localStorage.setItem('news_sources', JSON.stringify(sources));
        loadSources();
        updateStats();
        
        showMessage(`Fonte ${sources[index].enabled ? 'ativada' : 'desativada'}!`);
    }

    function editSource(index) {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const source = sources[index];
        
        document.getElementById('source-name').value = source.name;
        document.getElementById('source-url').value = source.url;
        document.getElementById('source-enabled').checked = source.enabled;
        
        // Remove da lista
        sources.splice(index, 1);
        localStorage.setItem('news_sources', JSON.stringify(sources));
        
        loadSources();
        updateStats();
        showMessage('Fonte pronta para edi√ß√£o! Preencha os campos e clique em "Adicionar Fonte" para salvar.');
    }

    function deleteSource(index) {
        showModal('Remover Fonte', 'Tem certeza que deseja remover esta fonte?', () => {
            const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
            sources.splice(index, 1);
            localStorage.setItem('news_sources', JSON.stringify(sources));
            
            loadSources();
            updateStats();
            showMessage('Fonte removida com sucesso!');
        });
    }

    // NOT√çCIAS GUARDADAS
    function loadSavedArticles() {
        const saved = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const container = document.getElementById('saved-articles-list');
        const countEl = document.getElementById('saved-count');
        
        countEl.textContent = saved.length;
        
        if (saved.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: #666;">Nenhuma not√≠cia guardada</p>';
            return;
        }
        
        let html = '';
        saved.forEach((article, index) => {
            const date = new Date(article.savedDate || article.date).toLocaleDateString('pt-PT');
            
            html += `
            <div class="list-item">
                <div class="item-info">
                    <h3>${article.title.substring(0, 60)}${article.title.length > 60 ? '...' : ''}</h3>
                    <p><strong>Fonte:</strong> ${article.source} | <strong>Data:</strong> ${date}</p>
                    <p><strong>Categoria:</strong> ${article.categoryName || article.category}</p>
                </div>
                <div class="item-actions">
                    <button class="action-btn" onclick="viewArticle('${article.id}')">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="action-btn delete-btn" onclick="deleteSavedArticle(${index})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }

    function searchSavedArticles() {
        const query = document.getElementById('search-saved').value.toLowerCase();
        const saved = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const container = document.getElementById('saved-articles-list');
        
        if (!query) {
            loadSavedArticles();
            return;
        }
        
        const filtered = saved.filter(article => 
            article.title.toLowerCase().includes(query) || 
            article.source.toLowerCase().includes(query) ||
            (article.categoryName && article.categoryName.toLowerCase().includes(query))
        );
        
        if (filtered.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: #666;">Nenhuma not√≠cia encontrada</p>';
            return;
        }
        
        let html = '';
        filtered.forEach((article, index) => {
            const date = new Date(article.savedDate || article.date).toLocaleDateString('pt-PT');
            
            html += `
            <div class="list-item">
                <div class="item-info">
                    <h3>${article.title.substring(0, 60)}${article.title.length > 60 ? '...' : ''}</h3>
                    <p><strong>Fonte:</strong> ${article.source} | <strong>Data:</strong> ${date}</p>
                </div>
                <div class="item-actions">
                    <button class="action-btn" onclick="viewArticle('${article.id}')">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="action-btn delete-btn" 
                            onclick="deleteSavedArticle(${saved.findIndex(a => a.id === article.id)})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
        document.getElementById('saved-count').textContent = filtered.length;
    }

    function viewArticle(id) {
        window.open(`leitura.html?id=${id}`, '_blank');
    }

    function deleteSavedArticle(index) {
        showModal('Remover Not√≠cia', 'Tem certeza que deseja remover esta not√≠cia guardada?', () => {
            const saved = JSON.parse(localStorage.getItem('saved_news') || '[]');
            saved.splice(index, 1);
            localStorage.setItem('saved_news', JSON.stringify(saved));
            
            loadSavedArticles();
            updateStats();
            showMessage('Not√≠cia removida com sucesso!');
        });
    }

    // CONFIGURA√á√ïES
    function loadSettings() {
        const settings = JSON.parse(localStorage.getItem('news_settings') || JSON.stringify(DEFAULT_SETTINGS));
        
        document.getElementById('update-interval').value = settings.updateInterval;
        document.getElementById('per-page').value = settings.perPage;
        document.getElementById('auto-refresh').checked = settings.autoRefresh;
        document.getElementById('cache-enabled').checked = settings.cacheEnabled;
        document.getElementById('admin-email').value = settings.adminEmail;
    }

    function saveSettings(e) {
        e.preventDefault();
        
        const settings = {
            updateInterval: parseInt(document.getElementById('update-interval').value),
            perPage: parseInt(document.getElementById('per-page').value),
            autoRefresh: document.getElementById('auto-refresh').checked,
            cacheEnabled: document.getElementById('cache-enabled').checked,
            adminEmail: document.getElementById('admin-email').value
        };
        
        localStorage.setItem('news_settings', JSON.stringify(settings));
        showMessage('Configura√ß√µes salvas com sucesso!');
        
        return false;
    }
   // A√á√ïES AVAN√áADAS
    function clearAllCache() {
        showModal('Limpar Cache', 'Tem certeza que deseja limpar todo o cache? Isso n√£o afeta as not√≠cias guardadas.', () => {
            localStorage.removeItem('all_news_cache');
            showMessage('Cache limpo com sucesso!');
            updateStats();
        });
    }

    function exportData() {
        const data = {
            sources: JSON.parse(localStorage.getItem('news_sources') || '[]'),
            saved: JSON.parse(localStorage.getItem('saved_news') || '[]'),
            settings: JSON.parse(localStorage.getItem('news_settings') || JSON.stringify(DEFAULT_SETTINGS)),
            exportDate: new Date().toISOString()
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `noticias-cld-backup-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showMessage('Dados exportados com sucesso!');
    }

    function importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    if (data.sources) localStorage.setItem('news_sources', JSON.stringify(data.sources));
                    if (data.saved) localStorage.setItem('saved_news', JSON.stringify(data.saved));
                    if (data.settings) localStorage.setItem('news_settings', JSON.stringify(data.settings));
                    
                    loadSources();
                    loadSavedArticles();
                    loadSettings();
                    updateStats();
                    
                    showMessage('Dados importados com sucesso!');
                } catch (error) {
                    showMessage('Erro ao importar dados. Arquivo inv√°lido!', 'error');
                }
            };
            
            reader.readAsText(file);
        };
        
        input.click();
    }

    function resetSystem() {
        showModal('Resetar Sistema', 'ATEN√á√ÉO: Esta a√ß√£o ir√° remover TODAS as configura√ß√µes e not√≠cias guardadas. Tem certeza?', () => {
            localStorage.clear();
            showMessage('Sistema resetado com sucesso!');
            setTimeout(() => {
                window.location.reload();
            }, 1000);
        });
    }

    // INICIALIZA√á√ÉO
    document.addEventListener('DOMContentLoaded', () => {
        // Carrega configura√ß√µes
        if (!localStorage.getItem('news_sources')) {
            const defaultSources = [
                { name: "O Pa√≠s", url: "https://www.opais.co.mz/wp-json/wp/v2/posts", enabled: true },
                { name: "Jornal Not√≠cias", url: "https://www.jornalnoticias.co.mz/wp-json/wp/v2/posts", enabled: true },
                { name: "Canal de Mo√ßambique", url: "https://canal.co.mz/wp-json/wp/v2/posts", enabled: true }
            ];
            localStorage.setItem('news_sources', JSON.stringify(defaultSources));
        }
        
        if (!localStorage.getItem('news_settings')) {
            localStorage.setItem('news_settings', JSON.stringify(DEFAULT_SETTINGS));
        }
        
        // Atualiza interface
        loadSources();
        loadSavedArticles();
        loadSettings();
        updateStats();
        
        // Mostra mensagem de boas-vindas
        setTimeout(() => {
            showMessage('Painel administrativo carregado com sucesso!');
        }, 500);
    });
    </script>
</body>
</html>