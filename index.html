<!doctype html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Not√≠cias CLD - Agregador Mo√ßambicano</title>
    <meta name="description" content="Agregador de not√≠cias de Mo√ßambique em tempo real">
    <meta name="robots" content="index, follow">
    
    <!-- Estilos Google News Style -->
    <style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    :root {
        --primary-color: #1a73e8;
        --primary-dark: #0d47a1;
        --secondary-color: #4285f4;
        --accent-color: #34a853;
        --text-primary: #202124;
        --text-secondary: #5f6368;
        --text-tertiary: #9aa0a6;
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --bg-tertiary: #f1f3f4;
        --border-color: #dadce0;
        --card-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
        --card-hover-shadow: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
        --header-height: 64px;
        --sidebar-width: 280px;
    }

    body {
        font-family: 'Google Sans', 'Roboto', 'Segoe UI', sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.5;
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* HEADER - Google News Style */
    .main-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: var(--header-height);
        background: var(--bg-primary);
        border-bottom: 1px solid var(--border-color);
        z-index: 1000;
        display: flex;
        align-items: center;
        padding: 0 24px;
        box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        max-width: 1400px;
        margin: 0 auto;
    }

    .logo-container {
        display: flex;
        align-items: center;
        gap: 12px;
        text-decoration: none;
    }

    .logo-icon {
        color: var(--primary-color);
        font-size: 28px;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: white;
        border-radius: 8px;
    }

    .logo-text {
        font-size: 22px;
        font-weight: 500;
        color: var(--text-primary);
        letter-spacing: -0.5px;
    }

    .logo-subtitle {
        font-size: 12px;
        color: var(--text-tertiary);
        font-weight: 400;
        margin-top: -2px;
    }

    .header-actions {
        display: flex;
        align-items: center;
        gap: 16px;
    }

    .search-container {
        position: relative;
        width: 600px;
        max-width: 100%;
    }

    .search-input {
        width: 100%;
        padding: 12px 48px 12px 44px;
        border: 1px solid var(--border-color);
        border-radius: 24px;
        font-size: 16px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        transition: all 0.2s;
        outline: none;
    }

    .search-input:focus {
        background: var(--bg-primary);
        border-color: var(--primary-color);
        box-shadow: 0 1px 6px rgba(32,33,36,0.28);
    }

    .search-icon {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-tertiary);
        font-size: 18px;
    }

    .search-clear {
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--text-tertiary);
        cursor: pointer;
        font-size: 18px;
        display: none;
    }

    .search-input:not(:placeholder-shown) + .search-clear {
        display: block;
    }

    .header-buttons {
        display: flex;
        gap: 8px;
    }

    .header-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 8px;
        background: var(--bg-secondary);
        color: var(--text-primary);
    }

    .header-btn:hover {
        background: var(--bg-tertiary);
    }

    .header-btn.primary {
        background: var(--primary-color);
        color: white;
    }

    .header-btn.primary:hover {
        background: var(--primary-dark);
    }

    /* MAIN LAYOUT */
    .main-container {
        display: flex;
        min-height: calc(100vh - var(--header-height));
        margin-top: var(--header-height);
    }

    /* SIDEBAR - Google News Style */
    .sidebar {
        width: var(--sidebar-width);
        background: var(--bg-primary);
        border-right: 1px solid var(--border-color);
        position: fixed;
        top: var(--header-height);
        bottom: 0;
        left: 0;
        overflow-y: auto;
        z-index: 900;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .sidebar-content {
        padding: 24px 0;
    }

    .sidebar-section {
        padding: 0 24px;
        margin-bottom: 32px;
    }

    .sidebar-title {
        font-size: 12px;
        font-weight: 500;
        color: var(--text-tertiary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 16px;
        padding-left: 16px;
    }

    .sidebar-list {
        list-style: none;
    }

    .sidebar-item {
        margin-bottom: 4px;
    }

    .sidebar-link {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 12px 16px;
        text-decoration: none;
        color: var(--text-primary);
        border-radius: 0 24px 24px 0;
        transition: all 0.2s;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
    }

    .sidebar-link:hover {
        background: var(--bg-secondary);
    }

    .sidebar-link.active {
        background: #e8f0fe;
        color: var(--primary-color);
    }

    .sidebar-link i {
        width: 20px;
        text-align: center;
        font-size: 18px;
    }

    /* CATEGORY BADGES */
    .category-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 16px;
        font-size: 13px;
        font-weight: 500;
        background: var(--bg-secondary);
        color: var(--text-secondary);
        transition: all 0.2s;
    }

    .category-badge:hover {
        background: var(--bg-tertiary);
    }

    .category-badge.active {
        background: var(--primary-color);
        color: white;
    }

    /* MAIN CONTENT */
    .main-content {
        flex: 1;
        margin-left: var(--sidebar-width);
        padding: 32px;
        max-width: 1400px;
        margin: 0 auto;
    }

    /* CONTENT HEADER */
    .content-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 32px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--border-color);
    }

    .content-title {
        font-size: 28px;
        font-weight: 400;
        color: var(--text-primary);
    }

    .content-subtitle {
        font-size: 14px;
        color: var(--text-secondary);
        margin-top: 4px;
    }

    .content-actions {
        display: flex;
        gap: 12px;
        align-items: center;
    }

    .refresh-btn {
        padding: 10px 20px;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .refresh-btn:hover {
        background: var(--bg-tertiary);
    }

    .refresh-btn:active {
        transform: scale(0.98);
    }

    /* NEWS GRID - Google News Style */
    .news-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 24px;
        margin-bottom: 40px;
    }

    /* NEWS CARD - Google News Style */
    .news-card {
        background: var(--bg-primary);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: var(--card-shadow);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        text-decoration: none;
        color: inherit;
        display: block;
        position: relative;
    }

    .news-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--card-hover-shadow);
    }

    .news-card.saved::after {
        content: '';
        position: absolute;
        top: 12px;
        right: 12px;
        width: 8px;
        height: 8px;
        background: var(--accent-color);
        border-radius: 50%;
    }

    .card-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        display: block;
    }

    .card-content {
        padding: 20px;
    }

    .card-category {
        display: inline-block;
        padding: 4px 10px;
        background: var(--bg-secondary);
        color: var(--text-secondary);
        border-radius: 12px;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 12px;
    }

    .card-title {
        font-size: 18px;
        font-weight: 500;
        line-height: 1.4;
        color: var(--text-primary);
        margin-bottom: 12px;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .card-excerpt {
        font-size: 14px;
        color: var(--text-secondary);
        line-height: 1.5;
        margin-bottom: 16px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 12px;
        border-top: 1px solid var(--border-color);
    }

    .card-source {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: var(--text-tertiary);
    }

    .card-source i {
        font-size: 14px;
    }

    .card-time {
        font-size: 12px;
        color: var(--text-tertiary);
        display: flex;
        align-items: center;
        gap: 4px;
    }

    /* FEATURED SECTION */
    .featured-section {
        margin-bottom: 48px;
    }

    .featured-title {
        font-size: 20px;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .featured-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 24px;
    }

    .featured-main {
        background: var(--bg-primary);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: var(--card-shadow);
        cursor: pointer;
        text-decoration: none;
        color: inherit;
    }

    .featured-main:hover {
        box-shadow: var(--card-hover-shadow);
    }

    .featured-main-image {
        width: 100%;
        height: 300px;
        object-fit: cover;
    }

    .featured-main-content {
        padding: 28px;
    }

    .featured-main-category {
        display: inline-block;
        padding: 6px 14px;
        background: var(--primary-color);
        color: white;
        border-radius: 14px;
        font-size: 12px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 16px;
    }

    .featured-main-title {
        font-size: 24px;
        font-weight: 500;
        line-height: 1.3;
        color: var(--text-primary);
        margin-bottom: 16px;
    }

    .featured-main-excerpt {
        font-size: 16px;
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 20px;
    }

    .featured-secondary {
        display: flex;
        flex-direction: column;
        gap: 16px;
    }

    .featured-secondary-item {
        background: var(--bg-primary);
        border-radius: 12px;
        padding: 20px;
        box-shadow: var(--card-shadow);
        cursor: pointer;
        text-decoration: none;
        color: inherit;
        transition: all 0.2s;
    }

    .featured-secondary-item:hover {
        transform: translateX(4px);
        box-shadow: var(--card-hover-shadow);
    }

    .featured-secondary-title {
        font-size: 16px;
        font-weight: 500;
        line-height: 1.4;
        color: var(--text-primary);
        margin-bottom: 8px;
    }

    .featured-secondary-source {
        font-size: 12px;
        color: var(--text-tertiary);
        display: flex;
        align-items: center;
        gap: 6px;
    }

    /* LOADING STATES */
    .loading-skeleton {
        animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    .skeleton-card {
        background: var(--bg-secondary);
        border-radius: 12px;
        overflow: hidden;
        height: 350px;
    }

    .skeleton-image {
        width: 100%;
        height: 200px;
        background: var(--bg-tertiary);
    }

    .skeleton-content {
        padding: 20px;
    }

    .skeleton-line {
        height: 12px;
        background: var(--bg-tertiary);
        border-radius: 6px;
        margin-bottom: 12px;
    }

    .skeleton-line.short {
        width: 60%;
    }

    .skeleton-line.medium {
        width: 80%;
    }

    /* INFINITE SCROLL LOADER */
    .infinite-loader {
        text-align: center;
        padding: 40px 0;
        display: none;
    }

    .loader-spinner {
        display: inline-block;
        width: 40px;
        height: 40px;
        border: 3px solid var(--border-color);
        border-top: 3px solid var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 16px;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* NO RESULTS */
    .no-results {
        text-align: center;
        padding: 80px 20px;
        color: var(--text-secondary);
    }

    .no-results-icon {
        font-size: 64px;
        color: var(--border-color);
        margin-bottom: 24px;
    }

    .no-results-title {
        font-size: 20px;
        font-weight: 500;
        margin-bottom: 12px;
        color: var(--text-primary);
    }

    .no-results-message {
        font-size: 16px;
        color: var(--text-secondary);
        margin-bottom: 24px;
    }

    /* QUICK ACTIONS */
    .quick-actions {
        position: fixed;
        bottom: 24px;
        right: 24px;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .action-button {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: var(--primary-color);
        color: white;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        box-shadow: 0 4px 12px rgba(26, 115, 232, 0.3);
        transition: all 0.3s;
    }

    .action-button:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(26, 115, 232, 0.4);
    }

    .action-button.secondary {
        background: var(--accent-color);
    }

    /* STATS BAR */
    .stats-bar {
        display: flex;
        align-items: center;
        gap: 24px;
        padding: 16px 0;
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 32px;
        font-size: 13px;
        color: var(--text-secondary);
    }

    .stat-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .stat-number {
        font-weight: 500;
        color: var(--text-primary);
    }

    /* CONTACT INFO */
    .contact-section {
        background: var(--bg-secondary);
        border-radius: 12px;
        padding: 24px;
        margin-top: 48px;
        border: 1px solid var(--border-color);
    }

    .contact-title {
        font-size: 16px;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .contact-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
    }

    .contact-item {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 14px;
        color: var(--text-secondary);
    }

    .contact-item a {
        color: var(--primary-color);
        text-decoration: none;
    }

    .contact-item a:hover {
        text-decoration: underline;
    }

    /* RESPONSIVIDADE */
    @media (max-width: 1200px) {
        .search-container {
            width: 400px;
        }
        
        .featured-grid {
            grid-template-columns: 1fr;
        }
        
        .news-grid {
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        }
    }

    @media (max-width: 992px) {
        .sidebar {
            transform: translateX(-100%);
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        .main-content {
            margin-left: 0;
            padding: 24px;
        }
        
        .search-container {
            width: 300px;
        }
    }

    @media (max-width: 768px) {
        .main-header {
            padding: 0 16px;
        }
        
        .logo-text {
            display: none;
        }
        
        .search-container {
            width: auto;
            flex: 1;
            margin: 0 16px;
        }
        
        .header-buttons .btn-text {
            display: none;
        }
        
        .header-btn {
            padding: 10px;
        }
        
        .main-content {
            padding: 16px;
        }
        
        .news-grid {
            grid-template-columns: 1fr;
            gap: 16px;
        }
        
        .content-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 16px;
        }
        
        .content-actions {
            width: 100%;
            justify-content: space-between;
        }
    }

    @media (max-width: 480px) {
        :root {
            --header-height: 56px;
        }
        
        .featured-main-title {
            font-size: 20px;
        }
        
        .featured-main-content {
            padding: 20px;
        }
        
        .card-title {
            font-size: 16px;
        }
        
        .contact-info {
            grid-template-columns: 1fr;
        }
    }

    /* DARK MODE SUPPORT */
    @media (prefers-color-scheme: dark) {
        :root {
            --primary-color: #8ab4f8;
            --primary-dark: #5e97f6;
            --secondary-color: #669df6;
            --accent-color: #81c995;
            --text-primary: #e8eaed;
            --text-secondary: #9aa0a6;
            --text-tertiary: #5f6368;
            --bg-primary: #202124;
            --bg-secondary: #292a2d;
            --bg-tertiary: #3c4043;
            --border-color: #3c4043;
            --card-shadow: 0 1px 2px 0 rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
            --card-hover-shadow: 0 1px 3px 0 rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
        }
        
     .sidebar-link.active {
            background: #3c4043;
            color: var(--primary-color);
        }
    }

    /* ANIMATIONS */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
        animation: fadeIn 0.5s ease-out;
    }

    /* SCROLLBAR */
    ::-webkit-scrollbar {
        width: 10px;
    }

    ::-webkit-scrollbar-track {
        background: var(--bg-secondary);
    }

    ::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--text-tertiary);
    }
    </style>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- HEADER -->
    <header class="main-header">
        <div class="header-content">
            <!-- MENU BUTTON (MOBILE) -->
            <button class="header-btn" id="menu-btn" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            
            <!-- LOGO -->
            <a href="#" class="logo-container">
                <div class="logo-icon">
                    <i class="fas fa-newspaper"></i>
                </div>
                <div>
                    <div class="logo-text">Not√≠cias CLD</div>
                    <div class="logo-subtitle">Mo√ßambique</div>
                </div>
            </a>
            
            <!-- SEARCH -->
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" 
                       class="search-input" 
                       id="search-input"
                       placeholder="Buscar not√≠cias..."
                       onkeyup="searchNews()">
                <button class="search-clear" onclick="clearSearch()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- HEADER ACTIONS -->
            <div class="header-actions">
                <div class="header-buttons">
                    <button class="header-btn" onclick="refreshNews()">
                        <i class="fas fa-sync-alt"></i>
                        <span class="btn-text">Atualizar</span>
                    </button>
                    <button class="header-btn primary" onclick="accessAdmin()">
                        <i class="fas fa-cog"></i>
                        <span class="btn-text">Admin</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN LAYOUT -->
    <div class="main-container">
        <!-- SIDEBAR -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <!-- CATEGORIES -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Categorias</h3>
                    <ul class="sidebar-list">
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link active" onclick="filterByCategory('todos')">
                                <i class="fas fa-globe"></i>
                                <span>Todas as Not√≠cias</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" onclick="filterByCategory('sociedade')">
                                <i class="fas fa-users"></i>
                                <span>Sociedade</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" onclick="filterByCategory('pol√≠tica')">
                                <i class="fas fa-landmark"></i>
                                <span>Pol√≠tica</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" onclick="filterByCategory('economia')">
                                <i class="fas fa-chart-line"></i>
                                <span>Economia</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" onclick="filterByCategory('esportes')">
                                <i class="fas fa-futbol"></i>
                                <span>Esportes</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" onclick="filterByCategory('cultura')">
                                <i class="fas fa-paint-brush"></i>
                                <span>Cultura</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" onclick="filterByCategory('sa√∫de')">
                                <i class="fas fa-heartbeat"></i>
                                <span>Sa√∫de</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" onclick="filterByCategory('tecnologia')">
                                <i class="fas fa-laptop"></i>
                                <span>Tecnologia</span>
                            </a>
                        </li>
                    </ul>
                </div>
        <!-- SOURCES -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Fontes</h3>
                    <div id="sources-list">
                        <!-- Fontes ser√£o carregadas dinamicamente -->
                    </div>
                </div>
                
                <!-- CONTACT INFO -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Contacto</h3>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:claudioarmando001@gmail.com">claudioarmando001@gmail.com</a>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <a href="tel:+258869667677">+258 869 667 677</a>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-info-circle"></i>
                            <span>Auto-salvamento ativo</span>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- MAIN CONTENT -->
        <main class="main-content" id="main-content">
            <!-- CONTENT HEADER -->
            <div class="content-header">
                <div>
                    <h1 class="content-title" id="content-title">√öltimas Not√≠cias</h1>
                    <p class="content-subtitle" id="content-subtitle">
                        <span id="news-count">0</span> not√≠cias encontradas
                        <span id="last-update"></span>
                    </p>
                </div>
                <div class="content-actions">
                    <button class="refresh-btn" onclick="refreshNews()">
                        <i class="fas fa-sync-alt"></i>
                        <span>Atualizar</span>
                    </button>
                </div>
            </div>
            
            <!-- STATS BAR -->
            <div class="stats-bar">
                <div class="stat-item">
                    <i class="fas fa-newspaper"></i>
                    <span>Total: <span class="stat-number" id="total-news">0</span></span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-save"></i>
                    <span>Guardadas: <span class="stat-number" id="saved-news">0</span></span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-clock"></i>
                    <span>Atualiza√ß√£o: <span class="stat-number">5 min</span></span>
                </div>
            </div>
            
            <!-- FEATURED SECTION -->
            <div class="featured-section" id="featured-section">
                <!-- Destaques ser√£o carregados aqui -->
            </div>
            
            <!-- NEWS GRID -->
            <div class="news-grid" id="news-grid">
                <!-- Not√≠cias ser√£o carregadas dinamicamente -->
            </div>
            
            <!-- LOADING SKELETONS (Inicial) -->
            <div class="news-grid" id="loading-skeletons">
                <!-- Skeleton cards para efeito de loading -->
            </div>
            
            <!-- INFINITE LOADER -->
            <div class="infinite-loader" id="infinite-loader">
                <div class="loader-spinner"></div>
                <p>Carregando mais not√≠cias...</p>
            </div>
            
            <!-- NO RESULTS -->
            <div class="no-results" id="no-results" style="display: none;">
                <div class="no-results-icon">
                    <i class="fas fa-newspaper"></i>
                </div>
                <h3 class="no-results-title">Nenhuma not√≠cia encontrada</h3>
                <p class="no-results-message">
                    Tente ajustar os filtros ou atualizar a p√°gina.
                </p>
                <button class="refresh-btn" onclick="refreshNews()">
                    <i class="fas fa-sync-alt"></i>
                    Atualizar Not√≠cias
                </button>
            </div>
            
            <!-- CONTACT SECTION -->
            <div class="contact-section">
                <h3 class="contact-title">
                    <i class="fas fa-address-card"></i> Informa√ß√µes de Contacto
                </h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <strong>Email:</strong>
                            <a href="mailto:claudioarmando001@gmail.com">claudioarmando001@gmail.com</a>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <strong>Telefone:</strong>
                            <a href="tel:+258869667677">+258 869 667 677</a>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-info-circle"></i>
                        <div>
                            <strong>Sistema:</strong>
                            Auto-salvamento ativo ‚Ä¢ Expira√ß√£o 2 meses
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- QUICK ACTIONS -->
    <div class="quick-actions">
        <button class="action-button" onclick="scrollToTop()" title="Voltar ao topo">
            <i class="fas fa-arrow-up"></i>
        </button>
        <button class="action-button secondary" onclick="refreshNews()" title="Atualizar not√≠cias">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>

    <!-- NOTIFICATION TOAST -->
    <div id="notification-toast" style="display: none;"></div>

    <script>
    // CONFIGURA√á√ÉO DO SISTEMA
    const SYSTEM_CONFIG = {
        version: '2.0.0',
        updateInterval: 5, // minutos
        perLoad: 15,
        autoSave: true,
        expireMonths: 2
    };

    // FONTES PADR√ÉO
    const DEFAULT_SOURCES = [
        {
            name: "O Pa√≠s Mo√ßambique",
            url: "https://www.opais.co.mz/wp-json/wp/v2/posts",
            enabled: true,
            lang: "pt",
            limit: 15,
            priority: 1
        },
        {
            name: "Jornal Not√≠cias",
            url: "https://www.jornalnoticias.co.mz/wp-json/wp/v2/posts",
            enabled: true,
            lang: "pt",
            limit: 15,
            priority: 2
        },
        {
            name: "Canal de Mo√ßambique",
            url: "https://canal.co.mz/wp-json/wp/v2/posts",
            enabled: true,
            lang: "pt",
            limit: 12,
            priority: 3
        },
        {
            name: "Savana",
            url: "https://savana.co.mz/wp-json/wp/v2/posts",
            enabled: true,
            lang: "pt",
            limit: 10,
            priority: 4
        },
        {
            name: "Jornal MZ",
            url: "https://jornalmz.com/wp-json/wp/v2/posts",
            enabled: true,
            lang: "pt",
            limit: 8,
            priority: 5
        }
    ];

    // VARI√ÅVEIS GLOBAIS
    let allNews = [];
    let filteredNews = [];
    let currentCategory = 'todos';
    let currentSource = 'todos';
    let isLoading = false;
    let isInitialLoad = true;
    let currentPage = 1;
    let hasMoreNews = true;
    let loadingSources = new Set();
    let loadedSources = new Set();
    let lastUpdateTime = null;
    let newsCache = new Map();
    let updateInterval = null;
    // ELEMENTOS DOM
    const newsGrid = document.getElementById('news-grid');
    const loadingSkeletons = document.getElementById('loading-skeletons');
    const infiniteLoader = document.getElementById('infinite-loader');
    const noResults = document.getElementById('no-results');
    const newsCount = document.getElementById('news-count');
    const totalNews = document.getElementById('total-news');
    const savedNews = document.getElementById('saved-news');
    const contentTitle = document.getElementById('content-title');
    const contentSubtitle = document.getElementById('content-subtitle');
    const lastUpdate = document.getElementById('last-update');
    const searchInput = document.getElementById('search-input');
    const sidebar = document.getElementById('sidebar');
    const featuredSection = document.getElementById('featured-section');
    const sourcesList = document.getElementById('sources-list');

    // CATEGORIAS
    const CATEGORIES = {
        'todos': { 
            name: 'Todas as Not√≠cias', 
            icon: 'fas fa-globe',
            color: '#1a73e8'
        },
        'sociedade': { 
            name: 'Sociedade', 
            icon: 'fas fa-users',
            color: '#4CAF50',
            keywords: ['sociedade', 'social', 'comunidade', 'educa√ß√£o', 'escola', 'universidade', 'aluno', 'professor', 'fam√≠lia', 'habita√ß√£o', 'bairro', 'popula√ß√£o']
        },
        'pol√≠tica': { 
            name: 'Pol√≠tica', 
            icon: 'fas fa-landmark',
            color: '#f44336',
            keywords: ['pol√≠tica', 'pol√≠tico', 'governo', 'presidente', 'ministro', 'elei√ß√µes', 'partido', 'parlamento', 'assembleia', 'deputado', 'lei', 'constitui√ß√£o']
        },
        'economia': { 
            name: 'Economia', 
            icon: 'fas fa-chart-line',
            color: '#FF9800',
            keywords: ['economia', 'econ√¥mico', 'neg√≥cio', 'empresa', 'investimento', 'banco', 'finan√ßas', 'mercado', 'bolsa', 'dinheiro', 'pre√ßo', 'infla√ß√£o']
        },
        'esportes': { 
            name: 'Esportes', 
            icon: 'fas fa-futbol',
            color: '#2196F3',
            keywords: ['esporte', 'futebol', 'jogo', 'atleta', 'campeonato', 'liga', 'competi√ß√£o', 'sele√ß√£o', 'est√°dio', 'golo', 'treino', 'equipa']
        },
        'cultura': { 
            name: 'Cultura', 
            icon: 'fas fa-paint-brush',
            color: '#9C27B0',
            keywords: ['cultura', 'cultural', 'arte', 'm√∫sica', 'teatro', 'cinema', 'literatura', 'poesia', 'tradi√ß√£o', 'festival', 'exposi√ß√£o', 'concerto']
        },
        'sa√∫de': { 
            name: 'Sa√∫de', 
            icon: 'fas fa-heartbeat',
            color: '#00BCD4',
            keywords: ['sa√∫de', 'hospital', 'm√©dico', 'enfermeiro', 'doen√ßa', 'vacina', 'tratamento', 'cl√≠nica', 'epidemia', 'paciente', 'medicamento']
        },
        'tecnologia': { 
            name: 'Tecnologia', 
            icon: 'fas fa-laptop',
            color: '#607D8B',
            keywords: ['tecnologia', 'tecnol√≥gico', 'internet', 'digital', 'aplicativo', 'software', 'startup', 'inova√ß√£o', 'celular', 'computador', 'rede']
        }
    };

    // INICIALIZA√á√ÉO
    document.addEventListener('DOMContentLoaded', () => {
        initializeSystem();
        loadInitialNews();
        setupEventListeners();
        startAutoRefresh();
        createSkeletonCards();
    });

    function initializeSystem() {
        // Carrega configura√ß√µes
        const settings = JSON.parse(localStorage.getItem('news_settings') || '{}');
        SYSTEM_CONFIG.updateInterval = settings.updateInterval || 5;
        SYSTEM_CONFIG.perLoad = settings.perLoad || 15;
        SYSTEM_CONFIG.autoSave = settings.autoSave !== false;
        SYSTEM_CONFIG.expireMonths = settings.expireMonths || 2;
        
        // Carrega fontes ou usa padr√£o
        let sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        if (sources.length === 0) {
            sources = DEFAULT_SOURCES;
            localStorage.setItem('news_sources', JSON.stringify(sources));
        }
        
        // Atualiza interface
        updateSourcesList(sources);
        updateLastUpdateTime();
        
        // Limpeza autom√°tica
        cleanExpiredNews();
    }

    function createSkeletonCards() {
        loadingSkeletons.innerHTML = '';
        for (let i = 0; i < 9; i++) {
            const skeleton = document.createElement('div');
            skeleton.className = 'skeleton-card loading-skeleton';
            skeleton.innerHTML = `
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-line short"></div>
                    <div class="skeleton-line medium"></div>
                    <div class="skeleton-line" style="width: 100%"></div>
                    <div class="skeleton-line" style="width: 80%"></div>
                    <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                        <div class="skeleton-line" style="width: 40%"></div>
                        <div class="skeleton-line" style="width: 30%"></div>
                    </div>
                </div>
            `;
            loadingSkeletons.appendChild(skeleton);
        }
    }

    function updateSourcesList(sources) {
        sourcesList.innerHTML = '';
        
        const allItem = document.createElement('div');
        allItem.className = 'sidebar-item';
        allItem.innerHTML = `
            <a href="#" class="sidebar-link ${currentSource === 'todos' ? 'active' : ''}" 
               onclick="filterBySource('todos')">
                <i class="fas fa-newspaper"></i>
                <span>Todas as Fontes</span>
            </a>
        `;
        sourcesList.appendChild(allItem);
        
        sources.forEach(source => {
            if (source.enabled) {
                const item = document.createElement('div');
                item.className = 'sidebar-item';
                item.innerHTML = `
                    <a href="#" class="sidebar-link ${currentSource === source.name ? 'active' : ''}" 
                       onclick="filterBySource('${source.name}')">
                        <i class="fas fa-newspaper"></i>
                        <span>${source.name}</span>
                    </a>
                `;
                sourcesList.appendChild(item);
            }
        });
    }

    // FUN√á√ïES DA INTERFACE
    function toggleSidebar() {
        sidebar.classList.toggle('active');
    }

    function filterByCategory(category) {
        currentCategory = category;
        
        // Atualiza links ativos
        document.querySelectorAll('.sidebar-link').forEach(link => {
            link.classList.remove('active');
        });
        event.target.closest('.sidebar-link').classList.add('active');
     // Atualiza t√≠tulo
        contentTitle.textContent = CATEGORIES[category].name;
        
        // Filtra e renderiza
        applyFilters();
        renderNews();
        
        // Fecha sidebar no mobile
        if (window.innerWidth <= 992) {
            toggleSidebar();
        }
        
        // Scroll para topo
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function filterBySource(source) {
        currentSource = source;
        
        // Atualiza links ativos
        document.querySelectorAll('.sidebar-link').forEach(link => {
            if (link.querySelector('i.fa-newspaper')) {
                link.classList.remove('active');
            }
        });
        event.target.closest('.sidebar-link').classList.add('active');
        
        // Filtra e renderiza
        applyFilters();
        renderNews();
        
        // Fecha sidebar no mobile
        if (window.innerWidth <= 992) {
            toggleSidebar();
        }
    }

    function searchNews() {
        applyFilters();
        renderNews();
    }

    function clearSearch() {
        searchInput.value = '';
        searchNews();
    }

    function refreshNews() {
        if (isLoading) return;
        
        showNotification('Atualizando not√≠cias...', 'info');
        
        // Limpa cache e recarrega
        allNews = [];
        filteredNews = [];
        currentPage = 1;
        hasMoreNews = true;
        loadingSources.clear();
        loadedSources.clear();
        
        // Mostra skeletons
        loadingSkeletons.style.display = 'grid';
        newsGrid.innerHTML = '';
        featuredSection.innerHTML = '';
        
        loadInitialNews();
    }

    function accessAdmin() {
        const password = prompt('üîê Digite a senha de acesso ao painel administrativo:');
        if (password === '0800') {
            window.location.href = 'adm.html';
        } else if (password !== null) {
            alert('‚ùå Senha incorreta!');
        }
    }

    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // CARREGAMENTO DE NOT√çCIAS
    async function loadInitialNews() {
        isLoading = true;
        
        try {
            // Carrega not√≠cias salvas primeiro
            await loadSavedNews();
            
            // Carrega de fontes externas (em paralelo)
            await loadExternalNews();
            
            // Ordena por data (mais recente primeiro)
            allNews.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Remove duplicatas
            allNews = allNews.filter((news, index, self) =>
                index === self.findIndex((n) => n.id === news.id)
            );
            
            applyFilters();
            renderNews();
            updateStats();
            
            if (isInitialLoad) {
                showNotification(`Carregadas ${allNews.length} not√≠cias`, 'success');
                isInitialLoad = false;
            }
            
            // Esconde skeletons
            loadingSkeletons.style.display = 'none';
            
        } catch (error) {
            console.error('Erro ao carregar not√≠cias:', error);
            showNotification('Erro ao carregar not√≠cias. Tente novamente.', 'error');
            loadingSkeletons.style.display = 'none';
            noResults.style.display = 'block';
        } finally {
            isLoading = false;
            lastUpdateTime = new Date();
            updateLastUpdateTime();
        }
    }

    async function loadSavedNews() {
        const savedNewsData = JSON.parse(localStorage.getItem('saved_news') || '[]');
        
        savedNewsData.forEach(news => {
            if (!newsCache.has(news.id)) {
                allNews.push({
                    ...news,
                    saved: true,
                    sourceType: 'saved'
                });
                newsCache.set(news.id, news);
            }
        });
    }

    async function loadExternalNews() {
        const sources = JSON.parse(localStorage.getItem('news_sources') || DEFAULT_SOURCES);
        const enabledSources = sources.filter(s => s.enabled);
        
        // Ordena por prioridade
        enabledSources.sort((a, b) => (a.priority || 999) - (b.priority || 999));
        
        // Processa cada fonte em sequ√™ncia para mostrar progressivamente
        for (const source of enabledSources) {
            if (loadingSources.has(source.name)) continue;
            
            loadingSources.add(source.name);
            showNotification(`Carregando ${source.name}...`, 'info');
            
            try {
                const articles = await fetchSourceNews(source);
                loadedSources.add(source.name);
                
                // Processa e adiciona ao grid progressivamente
                processAndDisplayArticles(articles, source);
                
            } catch (error) {
                console.error(`Erro ao carregar ${source.name}:`, error);
            }
            
            loadingSources.delete(source.name);
        }
    }

    async function fetchSourceNews(source) {
        const cacheKey = `news_${source.name}_${new Date().toISOString().split('T')[0]}`;
        const cached = localStorage.getItem(cacheKey);
        
        // Retorna cache se dispon√≠vel e recente
        if (cached) {
            const cacheData = JSON.parse(cached);
            const cacheTime = localStorage.getItem(`${cacheKey}_timestamp`);
            
            if (cacheTime && Date.now() - parseInt(cacheTime) < 3 * 60 * 60 * 1000) {
                return cacheData;
            }
        }
        
        try {
            const response = await fetch(
                `${source.url}?_embed&per_page=${source.limit || 10}&page=1&timestamp=${Date.now()}`
            );
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            
            const articles = await response.json();
            
            // Cache por 3 horas
            localStorage.setItem(cacheKey, JSON.stringify(articles));
            localStorage.setItem(`${cacheKey}_timestamp`, Date.now());
            
            return articles;
            
        } catch (error) {
            console.error(`Erro na fonte ${source.name}:`, error);
            return [];
        }
    }

    function processAndDisplayArticles(articles, source) {
        const processedArticles = articles.map(article => {
            const id = `ext_${article.id}_${source.name.replace(/\s+/g, '_')}`;
            
            if (newsCache.has(id)) return null;
            
            const category = determineCategory(
                article.title?.rendered || '',
                article.content?.rendered || ''
            );
            
            const newsItem = {
                id: id,
                title: article.title?.rendered || 'Sem t√≠tulo',
                excerpt: article.excerpt?.rendered?.replace(/<[^>]*>/g, '').substring(0, 150) + '...' || '',
                content: article.content?.rendered || '',
                image: article._embedded?.['wp:featuredmedia']?.[0]?.source_url || 
                       article.jetpack_featured_media_url ||
                       `https://via.placeholder.com/600x400/1a73e8/ffffff?text=${encodeURIComponent(source.name.substring(0, 2))}`,
                source: source.name,
                date: article.date || article.modified || new Date().toISOString(),
                link: article.link || '#',
                category: category,
                categoryName: CATEGORIES[category]?.name || category,
                original: true,
                sourceType: 'external'
            };
            
            newsCache.set(id, newsItem);
            return newsItem;
        }).filter(article => article !== null);
        
        // Adiciona ao array geral
        allNews.push(...processedArticles);
        
        // Ordena novamente
        allNews.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        // Atualiza filtros e renderiza
        applyFilters();
        renderNews();
        updateStats();
        
        // Atualiza tempo
        lastUpdateTime = new Date();
        updateLastUpdateTime();
    }

    function determineCategory(title, content) {
        const text = (title + ' ' + content).toLowerCase();
        let maxScore = 0;
        let selectedCategory = 'sociedade';
        
        Object.keys(CATEGORIES).forEach(cat => {
            if (cat === 'todos') return;
            
            let score = 0;
            CATEGORIES[cat].keywords.forEach(keyword => {
                if (text.includes(keyword)) {
                    score++;
                }
            });
            
            if (score > maxScore) {
                maxScore = score;
                selectedCategory = cat;
            }
        });
        
        return selectedCategory;
    }
   // FILTROS
    function applyFilters() {
        const searchText = searchInput.value.toLowerCase().trim();
        
        filteredNews = allNews.filter(news => {
            // Filtro por categoria
            if (currentCategory !== 'todos' && news.category !== currentCategory) {
                return false;
            }
            
            // Filtro por fonte
            if (currentSource !== 'todos' && news.source !== currentSource) {
                return false;
            }
            
            // Filtro por busca
            if (searchText) {
                const searchInTitle = news.title.toLowerCase().includes(searchText);
                const searchInSource = news.source.toLowerCase().includes(searchText);
                const searchInExcerpt = news.excerpt.toLowerCase().includes(searchText);
                const searchInCategory = news.categoryName?.toLowerCase().includes(searchText);
                
                return searchInTitle || searchInSource || searchInExcerpt || searchInCategory;
            }
            
            return true;
        });
        
        // Atualiza contador
        newsCount.textContent = filteredNews.length;
        
        // Verifica se h√° resultados
        if (filteredNews.length === 0 && !isLoading && loadedSources.size > 0) {
            noResults.style.display = 'block';
            newsGrid.style.display = 'none';
        } else {
            noResults.style.display = 'none';
            newsGrid.style.display = 'grid';
        }
    }

    // RENDERIZA√á√ÉO
    function renderNews() {
        if (filteredNews.length === 0) return;
        
        // Separa destaques (primeiras 5 not√≠cias mais recentes)
        const featured = filteredNews.slice(0, 5);
        const regular = filteredNews.slice(5);
        
        // Renderiza destaques
        renderFeaturedNews(featured);
        
        // Renderiza grid regular
        renderNewsGrid(regular);
    }

    function renderFeaturedNews(featured) {
        if (featured.length === 0) {
            featuredSection.style.display = 'none';
            return;
        }
        
        featuredSection.style.display = 'block';
        
        const mainNews = featured[0];
        const secondaryNews = featured.slice(1, 4);
        
        featuredSection.innerHTML = `
            <h2 class="featured-title">
                <i class="fas fa-star"></i> Destaques
            </h2>
            <div class="featured-grid">
                <a href="leitura.html?id=${mainNews.id}" class="featured-main fade-in">
                    <img src="${mainNews.image}" alt="${mainNews.title}" class="featured-main-image"
                         onerror="this.src='https://via.placeholder.com/800x300/1a73e8/ffffff?text=NOT√çCIA'">
                    <div class="featured-main-content">
                        <span class="featured-main-category">${mainNews.categoryName}</span>
                        <h3 class="featured-main-title">${mainNews.title}</h3>
                        <p class="featured-main-excerpt">${mainNews.excerpt}</p>
                        <div class="card-footer">
                            <div class="card-source">
                                <i class="fas fa-newspaper"></i>
                                ${mainNews.source}
                            </div>
                            <div class="card-time">
                                <i class="far fa-clock"></i>
                                ${formatTimeAgo(new Date(mainNews.date))}
                            </div>
                        </div>
                    </div>
                </a>
                <div class="featured-secondary">
                    ${secondaryNews.map(news => `
                        <a href="leitura.html?id=${news.id}" class="featured-secondary-item fade-in">
                            <h4 class="featured-secondary-title">${news.title}</h4>
                            <div class="card-source">
                                <i class="fas fa-newspaper"></i>
                                ${news.source} ‚Ä¢ ${formatTimeAgo(new Date(news.date))}
                            </div>
                        </a>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function renderNewsGrid(newsList) {
        const visibleNews = newsList.slice(0, currentPage * SYSTEM_CONFIG.perLoad);
        
        newsGrid.innerHTML = visibleNews.map(news => `
            <a href="leitura.html?id=${news.id}" class="news-card ${news.saved ? 'saved' : ''} fade-in">
                <img src="${news.image}" alt="${news.title}" class="card-image"
                     onerror="this.src='https://via.placeholder.com/400x200/1a73e8/ffffff?text=${encodeURIComponent(news.source.substring(0, 2))}'">
                <div class="card-content">
                    <span class="card-category">${news.categoryName}</span>
                    <h3 class="card-title">${news.title}</h3>
                    <p class="card-excerpt">${news.excerpt}</p>
                    <div class="card-footer">
                        <div class="card-source">
                            <i class="fas fa-newspaper"></i>
                            ${news.source}
                        </div>
                        <div class="card-time">
                            <i class="far fa-clock"></i>
                            ${formatTimeAgo(new Date(news.date))}
                        </div>
                    </div>
                </div>
            </a>
        `).join('');
        
        // Verifica se h√° mais not√≠cias para carregar
        hasMoreNews = newsList.length > visibleNews.length;
        infiniteLoader.style.display = hasMoreNews ? 'block' : 'none';
    }

    // FUN√á√ïES UTILIT√ÅRIAS
    function formatTimeAgo(date) {
        const now = new Date();
        const diffMs = now - date;
        const diffMins = Math.floor(diffMs / (1000 * 60));
        const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
        const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
        
        if (diffMins < 60) return `${diffMins} min`;
        if (diffHours < 24) return `${diffHours} h`;
        if (diffDays < 7) return `${diffDays} dias`;
        
        return date.toLocaleDateString('pt-PT', {
            day: 'numeric',
            month: 'short'
        });
    }

    function updateStats() {
        const savedCount = allNews.filter(n => n.saved).length;
        totalNews.textContent = allNews.length;
        savedNews.textContent = savedCount;
    }

    function updateLastUpdateTime() {
        if (lastUpdateTime) {
            const timeStr = formatTimeAgo(lastUpdateTime);
            lastUpdate.textContent = ` ‚Ä¢ Atualizado h√° ${timeStr}`;
        }
    }

    // SCROLL INFINITO
    function setupEventListeners() {
        window.addEventListener('scroll', () => {
            if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 800 && 
                !isLoading && hasMoreNews) {
                loadMoreNews();
            }
        });
        
        // Atalhos de teclado
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && window.innerWidth <= 992) {
                sidebar.classList.remove('active');
            }
            
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                searchInput.focus();
                searchInput.select();
            }
            
            if (e.key === 'F5' || (e.ctrlKey && e.key === 'r')) {
                e.preventDefault();
                refreshNews();
            }
            
            if (e.ctrlKey && e.key === 'a') {
                e.preventDefault();
                accessAdmin();
            }
        });
        
        // Foco na busca
        searchInput.addEventListener('focus', function() {
            this.select();
        });
    }

    function loadMoreNews() {
        if (isLoading || !hasMoreNews) return;
        
        currentPage++;
        const newsList = filteredNews.slice(5); // Exclui destaques
        const visibleNews = newsList.slice(0, currentPage * SYSTEM_CONFIG.perLoad);
        
        // Adiciona mais cards
        const newCards = newsList.slice((currentPage - 1) * SYSTEM_CONFIG.perLoad, currentPage * SYSTEM_CONFIG.perLoad);
        
        newCards.forEach(news => {
            const card = document.createElement('a');
            card.href = `leitura.html?id=${news.id}`;
            card.className = `news-card ${news.saved ? 'saved' : ''} fade-in`;
            card.innerHTML = `
                <img src="${news.image}" alt="${news.title}" class="card-image"
                     onerror="this.src='https://via.placeholder.com/400x200/1a73e8/ffffff?text=${encodeURIComponent(news.source.substring(0, 2))}'">
                <div class="card-content">
                    <span class="card-category">${news.categoryName}</span>
                    <h3 class="card-title">${news.title}</h3>
                    <p class="card-excerpt">${news.excerpt}</p>
                    <div class="card-footer">
                        <div class="card-source">
                            <i class="fas fa-newspaper"></i>
                            ${news.source}
                        </div>
                        <div class="card-time">
                            <i class="far fa-clock"></i>
                            ${formatTimeAgo(new Date(news.date))}
                        </div>
                    </div>
                </div>
            `;
            newsGrid.appendChild(card);
        });
        
        // Verifica se h√° mais not√≠cias
        hasMoreNews = newsList.length > visibleNews.length;
        infiniteLoader.style.display = hasMoreNews ? 'block' : 'none';
    }

    // ATUALIZA√á√ÉO AUTOM√ÅTICA
    function startAutoRefresh() {
        const interval = SYSTEM_CONFIG.updateInterval * 60 * 1000;
        
        if (updateInterval) {
            clearInterval(updateInterval);
        }
        
        updateInterval = setInterval(() => {
            if (document.visibilityState === 'visible' && !isLoading) {
                refreshNews();
            }
        }, interval);
    }
    // LIMPEZA DE NOT√çCIAS VENCIDAS
    function cleanExpiredNews() {
        const savedNewsData = JSON.parse(localStorage.getItem('saved_news') || '[]');
        const settings = JSON.parse(localStorage.getItem('news_settings') || '{}');
        const expireMonths = settings.expireMonths || 2;
        
        const now = new Date();
        const expireDate = new Date(now.getTime() - (expireMonths * 30 * 24 * 60 * 60 * 1000));
        
        const filtered = savedNewsData.filter(news => {
            const savedDate = new Date(news.savedDate || news.date);
            return savedDate >= expireDate;
        });
        
        if (filtered.length !== savedNewsData.length) {
            localStorage.setItem('saved_news', JSON.stringify(filtered));
            console.log(`Limpeza autom√°tica: ${savedNewsData.length - filtered.length} not√≠cias vencidas removidas.`);
        }
    }

    // NOTIFICA√á√ïES
    function showNotification(message, type = 'info') {
        const toast = document.getElementById('notification-toast');
        
        const colors = {
            info: '#1a73e8',
            success: '#34a853',
            error: '#ea4335',
            warning: '#fbbc05'
        };
        
        const icons = {
            info: 'fas fa-info-circle',
            success: 'fas fa-check-circle',
            error: 'fas fa-exclamation-circle',
            warning: 'fas fa-exclamation-triangle'
        };
        
        toast.innerHTML = `
            <div style="
                position: fixed;
                top: 100px;
                right: 24px;
                background: ${colors[type]};
                color: white;
                padding: 16px 24px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                display: flex;
                align-items: center;
                gap: 12px;
                z-index: 2000;
                animation: slideInRight 0.3s ease-out;
                max-width: 400px;
            ">
                <i class="${icons[type]}" style="font-size: 20px;"></i>
                <span style="flex: 1;">${message}</span>
                <button onclick="this.parentElement.style.display='none'" 
                        style="background: none; border: none; color: white; cursor: pointer; padding: 4px;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        
        toast.style.display = 'block';
        
        setTimeout(() => {
            toast.style.display = 'none';
        }, 5000);
        
        // Adiciona anima√ß√£o CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
    }

    // VERIFICA CONEX√ÉO
    window.addEventListener('online', () => {
        showNotification('Conex√£o restaurada. Atualizando not√≠cias...', 'success');
        refreshNews();
    });

    window.addEventListener('offline', () => {
        showNotification('Voc√™ est√° offline. Mostrando not√≠cias em cache.', 'warning');
    });

    // ATUALIZA√á√ÉO EM TEMPO REAL
    function checkForNewNews() {
        if (!isLoading && document.visibilityState === 'visible') {
            // Verifica se h√° novas not√≠cias nas fontes
            const sources = JSON.parse(localStorage.getItem('news_sources') || DEFAULT_SOURCES);
            const enabledSources = sources.filter(s => s.enabled);
            
            enabledSources.forEach(async (source) => {
                try {
                    const response = await fetch(
                        `${source.url}?_embed&per_page=1&timestamp=${Date.now()}`
                    );
                    
                    if (response.ok) {
                        const [latestArticle] = await response.json();
                        const id = `ext_${latestArticle.id}_${source.name.replace(/\s+/g, '_')}`;
                        
                        if (!newsCache.has(id)) {
                            showNotification(`Nova not√≠cia de ${source.name}`, 'info');
                        }
                    }
                } catch (error) {
                    // Ignora erros de verifica√ß√£o
                }
            });
        }
    }

    // Verifica novas not√≠cias a cada minuto
    setInterval(checkForNewNews, 60000);
    </script>
</body>
</html>