<!doctype html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Admin - Not√≠cias CLD</title>
    
    <!-- Fontes -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
    :root {
        --primary: #1a73e8;
        --primary-dark: #0d47a1;
        --secondary: #4CAF50;
        --accent: #FF9800;
        --danger: #f44336;
        --dark: #202124;
        --gray: #5f6368;
        --light-gray: #dadce0;
        --bg: #f8f9fa;
        --white: #ffffff;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Inter', sans-serif;
        background: var(--bg);
        color: var(--dark);
        height: 100vh;
        overflow: hidden;
    }

    /* LOGIN */
    .login-screen {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        padding: 20px;
    }

    .login-card {
        background: var(--white);
        border-radius: 16px;
        padding: 40px;
        width: 100%;
        max-width: 400px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        text-align: center;
    }

    .login-logo {
        font-size: 48px;
        color: var(--primary);
        margin-bottom: 20px;
    }

    .login-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 8px;
        color: var(--dark);
    }

    .login-subtitle {
        color: var(--gray);
        margin-bottom: 30px;
    }

    .login-form {
        margin-bottom: 30px;
    }

    .form-group {
        margin-bottom: 20px;
        text-align: left;
    }

    .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--dark);
    }

    .form-input {
        width: 100%;
        padding: 14px 16px;
        border: 2px solid var(--light-gray);
        border-radius: 12px;
        font-size: 16px;
        font-family: monospace;
        letter-spacing: 2px;
        transition: all 0.3s;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
    }

    .login-btn {
        width: 100%;
        padding: 16px;
        background: var(--primary);
        color: var(--white);
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }

    .login-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(26, 115, 232, 0.3);
    }

    .login-error {
        color: var(--danger);
        margin-top: 15px;
        font-size: 14px;
        display: none;
        padding: 12px;
        background: #ffebee;
        border-radius: 8px;
        border-left: 4px solid var(--danger);
    }

    /* ADMIN PANEL */
    .admin-panel {
        display: none;
        height: 100vh;
    }

    /* SIDEBAR */
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: 280px;
        background: var(--white);
        border-right: 1px solid var(--light-gray);
        padding: 20px 0;
        display: flex;
        flex-direction: column;
    }

    .sidebar-header {
        padding: 0 20px 20px;
        border-bottom: 1px solid var(--light-gray);
        margin-bottom: 20px;
    }

    .admin-logo {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 20px;
        font-weight: 700;
        color: var(--primary);
    }

    .admin-logo i {
        font-size: 24px;
    }

    .sidebar-nav {
        flex: 1;
        overflow-y: auto;
        padding: 0 15px;
    }

    .nav-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        border-radius: 12px;
        color: var(--gray);
        text-decoration: none;
        transition: all 0.3s;
        margin-bottom: 5px;
        font-weight: 500;
    }

    .nav-item:hover {
        background: var(--bg);
        color: var(--primary);
    }

    .nav-item.active {
        background: var(--primary);
        color: var(--white);
    }

    .nav-item i {
        width: 20px;
        text-align: center;
    }

    .sidebar-footer {
        padding: 20px 15px 0;
        border-top: 1px solid var(--light-gray);
    }

    .logout-btn {
        width: 100%;
        padding: 12px;
        background: none;
        border: 1px solid var(--light-gray);
        border-radius: 12px;
        color: var(--gray);
        font-weight: 500;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.3s;
    }

    .logout-btn:hover {
        border-color: var(--danger);
        color: var(--danger);
        background: #ffebee;
    }

    /* MAIN CONTENT */
    .admin-content {
        margin-left: 280px;
        height: 100vh;
        overflow-y: auto;
        padding: 20px;
    }

    /* HEADER */
    .content-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--light-gray);
    }

    .header-title {
        font-size: 24px;
        font-weight: 700;
        color: var(--dark);
    }

    .header-actions {
        display: flex;
        gap: 10px;
    }

    .action-btn {
        padding: 10px 20px;
        border: 1px solid var(--light-gray);
        background: var(--white);
        border-radius: 12px;
        font-size: 14px;
        font-weight: 500;
        color: var(--gray);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s;
    }

    .action-btn:hover {
        border-color: var(--primary);
        color: var(--primary);
    }

    .action-btn.primary {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
    }

    .action-btn.primary:hover {
        background: var(--primary-dark);
    }

    /* DASHBOARD */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: var(--white);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border: 1px solid var(--light-gray);
    }

    .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
    }

    .stat-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        background: var(--primary);
        color: var(--white);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
    }

    .stat-trend {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        background: var(--secondary);
        color: white;
    }

    .stat-trend.negative {
        background: var(--danger);
    }

    .stat-title {
        font-size: 14px;
        color: var(--gray);
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .stat-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 8px;
    }

    .stat-subtitle {
        font-size: 13px;
        color: var(--gray);
    }
    /* TABLES */
    .data-table {
        background: var(--white);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        margin-bottom: 30px;
    }

    .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid var(--light-gray);
    }

    .table-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--dark);
    }

    table {
        width: 100%;
        border-collapse: collapse;
    }

    th {
        text-align: left;
        padding: 15px 20px;
        background: var(--bg);
        font-weight: 600;
        color: var(--gray);
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 1px solid var(--light-gray);
    }

    td {
        padding: 15px 20px;
        border-bottom: 1px solid var(--light-gray);
        color: var(--dark);
    }

    tr:last-child td {
        border-bottom: none;
    }

    tr:hover {
        background: var(--bg);
    }

    .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    .status-active {
        background: #e8f5e9;
        color: #2e7d32;
    }

    .status-inactive {
        background: #ffebee;
        color: #c62828;
    }

    /* FORMUL√ÅRIOS */
    .form-card {
        background: var(--white);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        margin-bottom: 30px;
    }

    .form-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 20px;
        color: var(--dark);
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .form-control {
        margin-bottom: 20px;
    }

    .form-control label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--dark);
    }

    .form-control input,
    .form-control select,
    .form-control textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid var(--light-gray);
        border-radius: 10px;
        font-size: 15px;
        transition: all 0.3s;
    }

    .form-control input:focus,
    .form-control select:focus,
    .form-control textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
    }

    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .checkbox-group input {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    /* BOT√ïES */
    .btn-group {
        display: flex;
        gap: 12px;
        margin-top: 30px;
    }

    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 10px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s;
    }

    .btn-primary {
        background: var(--primary);
        color: var(--white);
    }

    .btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
    }

    .btn-secondary {
        background: var(--white);
        border: 1px solid var(--light-gray);
        color: var(--gray);
    }

    .btn-secondary:hover {
        border-color: var(--primary);
        color: var(--primary);
    }

    .btn-danger {
        background: var(--danger);
        color: var(--white);
    }

    .btn-danger:hover {
        background: #c62828;
    }

    /* MODAL */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
        backdrop-filter: blur(4px);
    }

    .modal {
        background: var(--white);
        border-radius: 12px;
        width: 100%;
        max-width: 500px;
        padding: 30px;
        position: relative;
    }

    .modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: var(--gray);
    }

    .modal-close:hover {
        background: var(--bg);
    }

    .modal-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 15px;
        color: var(--dark);
    }

    .modal-content {
        color: var(--gray);
        line-height: 1.6;
        margin-bottom: 25px;
    }

    .modal-actions {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
    }

    /* RESPONSIVIDADE */
    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
            width: 280px;
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        .admin-content {
            margin-left: 0;
        }
        
        .mobile-menu-btn {
            display: block;
        }
        
        .login-card {
            padding: 30px 20px;
        }
    }
    </style>
</head>
<body>
    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <div class="login-logo">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h1 class="login-title">Admin Not√≠cias CLD</h1>
            <p class="login-subtitle">Painel de Administra√ß√£o</p>
            
            <div class="login-form">
                <div class="form-group">
                    <label class="form-label">Senha de Acesso</label>
                    <input type="password" 
                           id="admin-password" 
                           class="form-input" 
                           placeholder="Digite a senha"
                           maxlength="4"
                           oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                    <small style="color: var(--gray); display: block; margin-top: 8px;">
                        Senha num√©rica de 4 d√≠gitos
                    </small>
                </div>
                
                <div id="login-error" class="login-error">
                    <i class="fas fa-exclamation-circle"></i> Senha incorreta!
                </div>
                
                <button class="login-btn" onclick="login()">
                    <i class="fas fa-sign-in-alt"></i> Acessar Painel
                </button>
            </div>
            
            <div style="color: var(--gray); font-size: 14px;">
                <p><i class="fas fa-lock"></i> Acesso restrito ao administrador</p>
            </div>
        </div>
    </div>
    <!-- ADMIN PANEL -->
    <div id="admin-panel" class="admin-panel">
        <!-- SIDEBAR -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="admin-logo">
                    <i class="fas fa-cogs"></i>
                    <span>Not√≠cias CLD Admin</span>
                </div>
            </div>
            
            <div class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" onclick="showTab('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#sources" class="nav-item" onclick="showTab('sources')">
                    <i class="fas fa-newspaper"></i>
                    <span>Fontes</span>
                </a>
                <a href="#news" class="nav-item" onclick="showTab('news')">
                    <i class="fas fa-star"></i>
                    <span>Not√≠cias Salvas</span>
                </a>
                <a href="#system" class="nav-item" onclick="showTab('system')">
                    <i class="fas fa-cog"></i>
                    <span>Sistema</span>
                </a>
                <a href="#tools" class="nav-item" onclick="showTab('tools')">
                    <i class="fas fa-tools"></i>
                    <span>Ferramentas</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Sair</span>
                </button>
            </div>
        </nav>

        <!-- MAIN CONTENT -->
        <main class="admin-content">
            <!-- DASHBOARD -->
            <div id="dashboard-tab" class="admin-tab">
                <div class="content-header">
                    <div>
                        <h2 class="header-title">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </h2>
                        <p style="color: var(--gray); margin-top: 4px;">Vis√£o geral do sistema</p>
                    </div>
                    <button class="action-btn" onclick="refreshStats()">
                        <i class="fas fa-sync-alt"></i> Atualizar
                    </button>
                </div>

                <div class="stats-grid" id="dashboard-stats">
                    <!-- Estat√≠sticas ser√£o carregadas aqui -->
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Atividade Recente</h3>
                        <button class="action-btn" onclick="refreshActivity()">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div id="recent-activity">
                        <!-- Atividade ser√° carregada aqui -->
                    </div>
                </div>
            </div>

            <!-- FONTES -->
            <div id="sources-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-newspaper"></i> Gerenciar Fontes
                    </h2>
                    <button class="action-btn primary" onclick="showAddSourceForm()">
                        <i class="fas fa-plus"></i> Nova Fonte
                    </button>
                </div>

                <div id="add-source-form" style="display: none;">
                    <div class="form-card">
                        <h3 class="form-title">
                            <i class="fas fa-plus-circle"></i> Adicionar Nova Fonte
                        </h3>
                        
                        <div class="form-row">
                            <div class="form-control">
                                <label>Nome da Fonte *</label>
                                <input type="text" id="source-name" placeholder="Ex: O Pa√≠s Mo√ßambique">
                            </div>
                            <div class="form-control">
                                <label>URL da API *</label>
                                <input type="url" id="source-url" 
                                       placeholder="https://www.opais.co.mz/wp-json/wp/v2/posts">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-control">
                                <label>Categoria</label>
                                <select id="source-category">
                                    <option value="news">Not√≠cias Gerais</option>
                                    <option value="politics">Pol√≠tica</option>
                                    <option value="economy">Economia</option>
                                    <option value="sports">Esportes</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label>Limite</label>
                                <input type="number" id="source-limit" min="1" max="50" value="10">
                            </div>
                        </div>
                        
                        <div class="form-control">
                            <div class="checkbox-group">
                                <input type="checkbox" id="source-enabled" checked>
                                <label for="source-enabled">Fonte ativa</label>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="addSource()">
                                <i class="fas fa-check"></i> Salvar Fonte
                            </button>
                            <button class="btn btn-secondary" onclick="hideAddSourceForm()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Fontes Configuradas</h3>
                        <button class="action-btn" onclick="refreshSources()">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>URL</th>
                                <th>Status</th>
                                <th>√öltima Atualiza√ß√£o</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="sources-table">
                            <!-- Fontes ser√£o carregadas aqui -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- NOT√çCIAS SALVADAS -->
            <div id="news-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-star"></i> Not√≠cias Salvas
                    </h2>
                    <div class="header-actions">
                        <button class="action-btn" onclick="exportNews()">
                            <i class="fas fa-download"></i> Exportar
                        </button>
                        <button class="action-btn danger" onclick="clearOldNews()">
                            <i class="fas fa-trash"></i> Limpar Antigas
                        </button>
                    </div>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Todas as Not√≠cias Salvas</h3>
                        <div style="display: flex; gap: 12px;">
                            <input type="text" id="search-news" 
                                   placeholder="üîç Buscar not√≠cias..."
                                   style="padding: 10px 16px; border: 1px solid var(--light-gray); border-radius: 8px; width: 200px;">
                            <button class="action-btn" onclick="refreshNewsList()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>T√≠tulo</th>
                                <th>Fonte</th>
                                <th>Data</th>
                                <th>Visualiza√ß√µes</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="news-table">
                            <!-- Not√≠cias ser√£o carregadas aqui -->
                        </tbody>
                    </table>
                </div>
            </div>
       <!-- SISTEMA -->
            <div id="system-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-cog"></i> Configura√ß√µes do Sistema
                    </h2>
                    <button class="action-btn primary" onclick="saveSystemSettings()">
                        <i class="fas fa-save"></i> Salvar
                    </button>
                </div>

                <div class="form-card">
                    <h3 class="form-title">
                        <i class="fas fa-sync-alt"></i> Atualiza√ß√£o
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-control">
                            <label>Intervalo (minutos)</label>
                            <input type="number" id="update-interval" min="1" max="60" value="5">
                        </div>
                        <div class="form-control">
                            <label>Not√≠cias por P√°gina</label>
                            <input type="number" id="per-page" min="10" max="100" value="20">
                        </div>
                    </div>
                    
                    <div class="form-control">
                        <div class="checkbox-group">
                            <input type="checkbox" id="auto-update" checked>
                            <label for="auto-update">Atualiza√ß√£o autom√°tica</label>
                        </div>
                    </div>
                </div>

                <div class="form-card">
                    <h3 class="form-title">
                        <i class="fas fa-user-shield"></i> Seguran√ßa
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-control">
                            <label>Senha Admin</label>
                            <input type="password" id="admin-pass" value="0800" maxlength="4">
                        </div>
                    </div>
                </div>

                <div class="form-card">
                    <h3 class="form-title">
                        <i class="fas fa-database"></i> Armazenamento
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-control">
                            <label>Tempo de Reten√ß√£o (dias)</label>
                            <input type="number" id="retention-days" min="1" max="365" value="60">
                        </div>
                        <div class="form-control">
                            <label>Limite de Not√≠cias</label>
                            <input type="number" id="news-limit" min="50" max="1000" value="200">
                        </div>
                    </div>
                </div>
            </div>

            <!-- FERRAMENTAS -->
            <div id="tools-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-tools"></i> Ferramentas
                    </h2>
                </div>

                <div class="stats-grid">
                    <div class="stat-card" onclick="exportAllData()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-file-export"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Exportar</h4>
                        <div class="stat-value">Dados</div>
                        <p class="stat-subtitle">Exportar todos os dados</p>
                    </div>

                    <div class="stat-card" onclick="importAllData()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-file-import"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Importar</h4>
                        <div class="stat-value">Backup</div>
                        <p class="stat-subtitle">Restaurar de backup</p>
                    </div>

                    <div class="stat-card" onclick="clearCache()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-broom"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Limpar</h4>
                        <div class="stat-value">Cache</div>
                        <p class="stat-subtitle">Limpar cache do sistema</p>
                    </div>

                    <div class="stat-card" onclick="optimizeStorage()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-compress-arrows-alt"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Otimizar</h4>
                        <div class="stat-value">Armazenamento</div>
                        <p class="stat-subtitle">Otimizar espa√ßo usado</p>
                    </div>
                </div>

                <div class="form-card" style="text-align: center;">
                    <h3 class="form-title">
                        <i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i> Zona de Perigo
                    </h3>
                    <p style="color: var(--gray); margin-bottom: 24px;">
                        Estas a√ß√µes s√£o irrevers√≠veis
                    </p>
                    <button class="btn btn-danger" onclick="resetSystem()">
                        <i class="fas fa-redo"></i> Resetar Sistema Completo
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- MODAL -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <h3 class="modal-title" id="modal-title">Confirmar A√ß√£o</h3>
            <div class="modal-content" id="modal-content"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                <button class="btn btn-danger" id="modal-confirm">Confirmar</button>
            </div>
        </div>
    </div>
   <script>
    // CONFIGURA√á√ÉO
    const ADMIN_CONFIG = {
        password: '0800',
        storageKey: 'cld_news',
        sourcesKey: 'cld_sources',
        settingsKey: 'cld_settings'
    };

    // ELEMENTOS DOM
    const loginScreen = document.getElementById('login-screen');
    const adminPanel = document.getElementById('admin-panel');
    const passwordInput = document.getElementById('admin-password');
    const loginError = document.getElementById('login-error');
    const modal = document.getElementById('confirm-modal');

    // VARI√ÅVEIS
    let currentTab = 'dashboard';

    // LOGIN
    function login() {
        const password = passwordInput.value.trim();
        
        if (password === ADMIN_CONFIG.password) {
            loginScreen.style.display = 'none';
            adminPanel.style.display = 'block';
            loginError.style.display = 'none';
            passwordInput.value = '';
            
            // Carrega dados iniciais
            loadDashboard();
            loadSources();
            loadSavedNews();
            
        } else {
            loginError.style.display = 'block';
            passwordInput.focus();
            passwordInput.select();
            
            // Efeito de erro
            passwordInput.style.animation = 'none';
            setTimeout(() => {
                passwordInput.style.animation = 'shake 0.5s';
            }, 10);
        }
    }

    // LOGOUT
    function logout() {
        showModal(
            'Confirmar Sa√≠da',
            'Tem certeza que deseja sair do painel administrativo?',
            () => {
                adminPanel.style.display = 'none';
                loginScreen.style.display = 'flex';
            }
        );
    }

    // NAVEGA√á√ÉO
    function showTab(tabName) {
        // Atualiza navega√ß√£o
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });
        event.target.classList.add('active');
        
        // Esconde todas as tabs
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.style.display = 'none';
        });
        
        // Mostra tab selecionada
        document.getElementById(`${tabName}-tab`).style.display = 'block';
        currentTab = tabName;
    }

    // DASHBOARD
    function loadDashboard() {
        const stats = calculateStats();
        
        const statsHTML = `
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon">
                    <i class="fas fa-newspaper"></i>
                </div>
                <span class="stat-trend">+${stats.dailyGrowth}%</span>
            </div>
            <h4 class="stat-title">Total de Not√≠cias</h4>
            <div class="stat-value">${stats.totalNews}</div>
            <p class="stat-subtitle">No sistema</p>
        </div>
        
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon" style="background: var(--secondary);">
                    <i class="fas fa-star"></i>
                </div>
                <span class="stat-trend">+${stats.savedGrowth}%</span>
            </div>
            <h4 class="stat-title">Not√≠cias Salvas</h4>
            <div class="stat-value">${stats.savedNews}</div>
            <p class="stat-subtitle">Pelos usu√°rios</p>
        </div>
        
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon" style="background: var(--accent);">
                    <i class="fas fa-eye"></i>
                </div>
                <span class="stat-trend">+${stats.viewsGrowth}%</span>
            </div>
            <h4 class="stat-title">Visualiza√ß√µes</h4>
            <div class="stat-value">${stats.totalViews}</div>
            <p class="stat-subtitle">Hoje</p>
        </div>
        
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon" style="background: #9C27B0;">
                    <i class="fas fa-server"></i>
                </div>
                <span class="stat-trend">${stats.storageUsed}%</span>
            </div>
            <h4 class="stat-title">Armazenamento</h4>
            <div class="stat-value">${stats.storageMB}MB</div>
            <p class="stat-subtitle">Usado</p>
        </div>
        `;
        
        document.getElementById('dashboard-stats').innerHTML = statsHTML;
        
        // Carrega atividade recente
        loadRecentActivity();
    }

    function calculateStats() {
        const allNews = JSON.parse(localStorage.getItem('cld_news') || '[]');
        const savedNews = JSON.parse(localStorage.getItem('cld_saved') || '[]');
        
        // Calcula visualiza√ß√µes totais
        const totalViews = allNews.reduce((sum, news) => sum + (news.views || 0), 0);
        
        // Calcula uso de armazenamento
        const storageUsed = Math.floor((JSON.stringify(localStorage).length / (5 * 1024 * 1024)) * 100);
        const storageMB = (JSON.stringify(localStorage).length / (1024 * 1024)).toFixed(2);
        
        return {
            totalNews: allNews.length,
            savedNews: savedNews.length,
            totalViews: totalViews,
            storageUsed: storageUsed,
            storageMB: storageMB,
            dailyGrowth: Math.floor(Math.random() * 15) + 5,
            savedGrowth: Math.floor(Math.random() * 20) + 10,
            viewsGrowth: Math.floor(Math.random() * 25) + 8
        };
    }

    function loadRecentActivity() {
        const activity = [
            { action: 'Not√≠cia publicada', source: 'O Pa√≠s', time: '2 min atr√°s' },
            { action: 'Fonte atualizada', source: 'Jornal Not√≠cias', time: '15 min atr√°s' },
            { action: 'Usu√°rio salvou not√≠cia', source: 'Cliente', time: '30 min atr√°s' },
            { action: 'Cache limpo', source: 'Sistema', time: '1 hora atr√°s' },
            { action: 'Backup autom√°tico', source: 'Sistema', time: '2 horas atr√°s' }
        ];
        
        let html = '<table>';
        activity.forEach(item => {
            html += `
            <tr>
                <td>
                    <div style="font-weight: 500;">${item.action}</div>
                    <div style="font-size: 13px; color: var(--gray);">${item.source}</div>
                </td>
                <td style="color: var(--gray);">${item.time}</td>
            </tr>
            `;
        });
        html += '</table>';
        
        document.getElementById('recent-activity').innerHTML = html;
    }

    function refreshStats() {
        loadDashboard();
        showNotification('Estat√≠sticas atualizadas', 'success');
    }

    function refreshActivity() {
        loadRecentActivity();
        showNotification('Atividade atualizada', 'success');
    }

    // GERENCIAR FONTES
    function loadSources() {
        const sources = JSON.parse(localStorage.getItem('cld_sources') || '[]');
        const table = document.getElementById('sources-table');
        
        if (sources.length === 0) {
            table.innerHTML = `
            <tr>
                <td colspan="5" style="text-align: center; padding: 40px; color: var(--gray);">
                    <i class="fas fa-newspaper" style="font-size: 32px; opacity: 0.3; margin-bottom: 16px; display: block;"></i>
                    <p>Nenhuma fonte configurada</p>
                </td>
            </tr>
            `;
            return;
        }
        
        let html = '';
        sources.forEach((source, index) => {
            const lastUpdate = source.lastFetch ? 
                new Date(source.lastFetch).toLocaleTimeString('pt-PT') : 'Nunca';
            
            html += `
            <tr>
                <td>
                    <div style="font-weight: 500;">${source.name}</div>
                    <div style="font-size: 13px; color: var(--gray);">${source.category || 'news'}</div>
                </td>
                <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    ${source.api}
                </td>
                <td>
                    <span class="status-badge ${source.enabled ? 'status-active' : 'status-inactive'}">
                        <i class="fas fa-${source.enabled ? 'check' : 'times'}-circle"></i>
                        ${source.enabled ? 'Ativa' : 'Inativa'}
                    </span>
                </td>
                <td style="color: var(--gray);">${lastUpdate}</td>
                <td>
                    <div style="display: flex; gap: 8px;">
                        <button class="action-btn" style="padding: 6px 12px;" onclick="toggleSource(${index})">
                            <i class="fas fa-power-off"></i>
                        </button>
                        <button class="action-btn" style="padding: 6px 12px;" onclick="editSource(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn" style="padding: 6px 12px; color: var(--danger);" onclick="deleteSource(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
            `;
        });
        
        table.innerHTML = html;
    }

    function showAddSourceForm() {
        document.getElementById('add-source-form').style.display = 'block';
    }

    function hideAddSourceForm() {
        document.getElementById('add-source-form').style.display = 'none';
        clearSourceForm();
    }

    function clearSourceForm() {
        document.getElementById('source-name').value = '';
        document.getElementById('source-url').value = '';
        document.getElementById('source-category').value = 'news';
        document.getElementById('source-limit').value = '10';
        document.getElementById('source-enabled').checked = true;
    }

    function addSource() {
        const name = document.getElementById('source-name').value.trim();
        const url = document.getElementById('source-url').value.trim();
        const category = document.getElementById('source-category').value;
        const limit = parseInt(document.getElementById('source-limit').value);
        const enabled = document.getElementById('source-enabled').checked;
        
        if (!name || !url) {
            showNotification('Preencha todos os campos obrigat√≥rios', 'error');
            return;
        }
        
        const sources = JSON.parse(localStorage.getItem('cld_sources') || '[]');
     // Verifica se j√° existe
        if (sources.some(s => s.url === url)) {
            showNotification('Esta fonte j√° est√° configurada', 'error');
            return;
        }
        
        sources.push({
            id: name.toLowerCase().replace(/\s+/g, '_'),
            name,
            api: url,
            category,
            limit,
            enabled,
            lastFetch: 0
        });
        
        localStorage.setItem('cld_sources', JSON.stringify(sources));
        
        hideAddSourceForm();
        loadSources();
        loadDashboard();
        
        showNotification(`Fonte "${name}" adicionada com sucesso`, 'success');
    }

    function toggleSource(index) {
        const sources = JSON.parse(localStorage.getItem('cld_sources') || '[]');
        sources[index].enabled = !sources[index].enabled;
        localStorage.setItem('cld_sources', JSON.stringify(sources));
        loadSources();
        
        showNotification(
            `Fonte ${sources[index].enabled ? 'ativada' : 'desativada'}`,
            sources[index].enabled ? 'success' : 'warning'
        );
    }

    function editSource(index) {
        const sources = JSON.parse(localStorage.getItem('cld_sources') || '[]');
        const source = sources[index];
        
        // Preenche formul√°rio
        document.getElementById('source-name').value = source.name;
        document.getElementById('source-url').value = source.api;
        document.getElementById('source-category').value = source.category || 'news';
        document.getElementById('source-limit').value = source.limit || 10;
        document.getElementById('source-enabled').checked = source.enabled;
        
        // Remove da lista
        sources.splice(index, 1);
        localStorage.setItem('cld_sources', JSON.stringify(sources));
        
        showAddSourceForm();
        loadSources();
    }

    function deleteSource(index) {
        showModal(
            'Remover Fonte',
            'Tem certeza que deseja remover esta fonte?<br>Esta a√ß√£o n√£o pode ser desfeita.',
            () => {
                const sources = JSON.parse(localStorage.getItem('cld_sources') || '[]');
                const removed = sources.splice(index, 1)[0];
                localStorage.setItem('cld_sources', JSON.stringify(sources));
                
                loadSources();
                loadDashboard();
                
                showNotification(`Fonte "${removed.name}" removida`, 'success');
            }
        );
    }

    function refreshSources() {
        loadSources();
        showNotification('Fontes atualizadas', 'success');
    }

    // NOT√çCIAS SALVADAS
    function loadSavedNews() {
        const savedNews = JSON.parse(localStorage.getItem('cld_saved') || '[]');
        const table = document.getElementById('news-table');
        
        if (savedNews.length === 0) {
            table.innerHTML = `
            <tr>
                <td colspan="5" style="text-align: center; padding: 40px; color: var(--gray);">
                    <i class="fas fa-star" style="font-size: 32px; opacity: 0.3; margin-bottom: 16px; display: block;"></i>
                    <p>Nenhuma not√≠cia salva</p>
                </td>
            </tr>
            `;
            return;
        }
        
        let html = '';
        savedNews.forEach((news, index) => {
            const date = new Date(news.date).toLocaleDateString('pt-PT');
            
            html += `
            <tr>
                <td>
                    <div style="font-weight: 500; max-width: 300px; overflow: hidden; text-overflow: ellipsis;">${news.title}</div>
                    <div style="font-size: 13px; color: var(--gray);">${news.category || 'Not√≠cia'}</div>
                </td>
                <td>${news.source}</td>
                <td style="color: var(--gray);">${date}</td>
                <td>${news.views || 0}</td>
                <td>
                    <div style="display: flex; gap: 8px;">
                        <button class="action-btn" style="padding: 6px 12px;" onclick="viewNews('${news.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn" style="padding: 6px 12px; color: var(--danger);" onclick="deleteSavedNews(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
            `;
        });
        
        table.innerHTML = html;
    }

    function viewNews(id) {
        window.open(`article.html?id=${id}`, '_blank');
    }

    function deleteSavedNews(index) {
        showModal(
            'Remover Not√≠cia',
            'Tem certeza que deseja remover esta not√≠cia?<br>Esta a√ß√£o n√£o pode ser desfeita.',
            () => {
                const savedNews = JSON.parse(localStorage.getItem('cld_saved') || '[]');
                const removed = savedNews.splice(index, 1)[0];
                localStorage.setItem('cld_saved', JSON.stringify(savedNews));
                
                loadSavedNews();
                loadDashboard();
                
                showNotification('Not√≠cia removida', 'success');
            }
        );
    }

    function exportNews() {
        const savedNews = JSON.parse(localStorage.getItem('cld_saved') || '[]');
        const data = {
            news: savedNews,
            exportedAt: new Date().toISOString(),
            total: savedNews.length
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `noticias-cld-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        
        showNotification('Not√≠cias exportadas com sucesso', 'success');
    }

    function clearOldNews() {
        showModal(
            'Limpar Not√≠cias Antigas',
            'Esta a√ß√£o ir√° remover not√≠cias com mais de 60 dias.<br>Tem certeza?',
            () => {
                const now = Date.now();
                const savedNews = JSON.parse(localStorage.getItem('cld_saved') || '[]');
                const freshNews = savedNews.filter(news => {
                    const age = now - new Date(news.addedAt).getTime();
                    return age < (60 * 24 * 60 * 60 * 1000);
                });
                
                localStorage.setItem('cld_saved', JSON.stringify(freshNews));
                loadSavedNews();
                loadDashboard();
                
                showNotification(`${savedNews.length - freshNews.length} not√≠cias removidas`, 'success');
            }
        );
    }

    function refreshNewsList() {
        loadSavedNews();
        showNotification('Lista de not√≠cias atualizada', 'success');
    }

    // SISTEMA
    function saveSystemSettings() {
        const settings = {
            updateInterval: parseInt(document.getElementById('update-interval').value) || 5,
            perPage: parseInt(document.getElementById('per-page').value) || 20,
            autoUpdate: document.getElementById('auto-update').checked,
            adminPassword: document.getElementById('admin-pass').value || '0800',
            retentionDays: parseInt(document.getElementById('retention-days').value) || 60,
            newsLimit: parseInt(document.getElementById('news-limit').value) || 200
        };
        
        localStorage.setItem('cld_settings', JSON.stringify(settings));
        showNotification('Configura√ß√µes salvas com sucesso', 'success');
    }
    // FERRAMENTAS
    function exportAllData() {
        const data = {
            news: JSON.parse(localStorage.getItem('cld_news') || '[]'),
            saved: JSON.parse(localStorage.getItem('cld_saved') || '[]'),
            sources: JSON.parse(localStorage.getItem('cld_sources') || '[]'),
            settings: JSON.parse(localStorage.getItem('cld_settings') || {}),
            exportedAt: new Date().toISOString(),
            version: '2.0'
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `cld-backup-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        
        showNotification('Backup completo exportado', 'success');
    }

    function importAllData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    showModal(
                        'Importar Backup',
                        `Tem certeza que deseja importar este backup?<br>
                         <strong>Data:</strong> ${new Date(data.exportedAt).toLocaleString()}<br>
                         <strong>Not√≠cias:</strong> ${data.news?.length || 0}<br>
                         <strong>Fontes:</strong> ${data.sources?.length || 0}`,
                        () => {
                            if (data.news) localStorage.setItem('cld_news', JSON.stringify(data.news));
                            if (data.saved) localStorage.setItem('cld_saved', JSON.stringify(data.saved));
                            if (data.sources) localStorage.setItem('cld_sources', JSON.stringify(data.sources));
                            if (data.settings) localStorage.setItem('cld_settings', JSON.stringify(data.settings));
                            
                            loadDashboard();
                            loadSources();
                            loadSavedNews();
                            
                            showNotification('Backup importado com sucesso', 'success');
                        }
                    );
                } catch (error) {
                    showNotification('Erro ao importar backup', 'error');
                }
            };
            
            reader.readAsText(file);
        };
        
        input.click();
    }

    function clearCache() {
        // Remove caches antigos
        Object.keys(localStorage).forEach(key => {
            if (key.startsWith('cache_')) {
                localStorage.removeItem(key);
            }
        });
        
        showNotification('Cache limpo com sucesso', 'success');
    }

    function optimizeStorage() {
        // Remove not√≠cias duplicadas
        const allNews = JSON.parse(localStorage.getItem('cld_news') || '[]');
        const seen = new Set();
        const uniqueNews = allNews.filter(news => {
            const key = news.title + news.source;
            if (seen.has(key)) return false;
            seen.add(key);
            return true;
        });
        
        localStorage.setItem('cld_news', uniqueNews);
        showNotification('Armazenamento otimizado', 'success');
    }

    function resetSystem() {
        showModal(
            'Resetar Sistema',
            `<div style="color: var(--danger); text-align: center;">
                <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 16px;"></i>
                <h3 style="color: var(--danger);">ATEN√á√ÉO!</h3>
                <p>Todos os dados ser√£o permanentemente removidos:</p>
                <ul style="text-align: left; margin: 16px 0;">
                    <li>Todas as not√≠cias</li>
                    <li>Todas as fontes configuradas</li>
                    <li>Todas as configura√ß√µes</li>
                </ul>
                <p><strong>Esta a√ß√£o n√£o pode ser desfeita!</strong></p>
                <p>Digite <code>RESETAR</code> para confirmar:</p>
                <input type="text" id="reset-confirm" style="width: 100%; padding: 12px; margin: 16px 0; border: 2px solid var(--danger); border-radius: 8px; text-align: center; font-family: monospace;">
            </div>`,
            () => {
                const confirmInput = document.getElementById('reset-confirm');
                if (confirmInput && confirmInput.value === 'RESETAR') {
                    // Limpa todos os dados
                    localStorage.clear();
                    
                    // Recarrega a p√°gina
                    setTimeout(() => {
                        window.location.reload();
                    }, 1000);
                    
                    showNotification('Sistema resetado com sucesso', 'success');
                } else {
                    showNotification('Confirma√ß√£o incorreta', 'error');
                }
            }
        );
    }

    // MODAL
    function showModal(title, content, callback) {
        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-content').innerHTML = content;
        modal.style.display = 'flex';
        
        document.getElementById('modal-confirm').onclick = () => {
            if (callback) callback();
            closeModal();
        };
    }

    function closeModal() {
        modal.style.display = 'none';
    }

    // NOTIFICA√á√ïES
    function showNotification(message, type = 'success') {
        // Implementa√ß√£o simples
        alert(`[${type.toUpperCase()}] ${message}`);
    }

    // ANIMA√á√ÉO DE SHAKE
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    `;
    document.head.appendChild(style);

    // ATALHOS
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && document.activeElement === passwordInput) {
            login();
        }
        
        if (e.key === 'Escape') {
            closeModal();
        }
    });
    </script>
</body>
</html>