<!doctype html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Admin - NewsHub MOZ</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
    :root {
        --primary-color: #1a73e8;
        --primary-dark: #0d47a1;
        --secondary-color: #4285f4;
        --accent-color: #34a853;
        --warning-color: #fbbc05;
        --danger-color: #ea4335;
        --dark-color: #202124;
        --dark-gray: #5f6368;
        --medium-gray: #80868b;
        --light-gray: #dadce0;
        --background-gray: #f8f9fa;
        --white: #ffffff;
        --sidebar-width: 280px;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: var(--background-gray);
        color: var(--dark-color);
        -webkit-font-smoothing: antialiased;
        height: 100vh;
        overflow: hidden;
    }

    /* LOGIN SCREEN */
    .login-screen {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        padding: 24px;
    }

    .login-card {
        background: var(--white);
        border-radius: 16px;
        padding: 48px;
        width: 100%;
        max-width: 400px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        text-align: center;
    }

    .login-logo {
        font-size: 48px;
        color: var(--primary-color);
        margin-bottom: 24px;
    }

    .login-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 8px;
        color: var(--dark-color);
    }

    .login-subtitle {
        color: var(--dark-gray);
        margin-bottom: 40px;
        font-size: 15px;
    }

    .login-form {
        margin-bottom: 32px;
    }

    .form-group {
        margin-bottom: 24px;
        text-align: left;
    }

    .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--dark-color);
        font-size: 14px;
    }

    .form-input {
        width: 100%;
        padding: 16px 20px;
        border: 2px solid var(--light-gray);
        border-radius: 12px;
        font-size: 16px;
        font-family: 'Inter', monospace;
        letter-spacing: 2px;
        transition: all 0.2s;
        background: var(--background-gray);
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary-color);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
    }

    .login-btn {
        width: 100%;
        padding: 18px;
        background: var(--primary-color);
        color: var(--white);
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        margin-top: 8px;
    }

    .login-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(26, 115, 232, 0.3);
    }

    .login-error {
        color: var(--danger-color);
        margin-top: 16px;
        font-size: 14px;
        display: none;
        padding: 12px;
        background: #ffebee;
        border-radius: 8px;
        border-left: 4px solid var(--danger-color);
    }

    /* ADMIN PANEL */
    .admin-panel {
        display: none;
        height: 100vh;
    }

    /* SIDEBAR */
    .admin-sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: var(--sidebar-width);
        background: var(--white);
        border-right: 1px solid var(--light-gray);
        padding: 24px 0;
        display: flex;
        flex-direction: column;
        z-index: 100;
    }

    .sidebar-header {
        padding: 0 24px 24px;
        border-bottom: 1px solid var(--light-gray);
        margin-bottom: 24px;
    }

    .admin-logo {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 20px;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
    }

    .admin-logo i {
        font-size: 24px;
    }

    .sidebar-nav {
        flex: 1;
        overflow-y: auto;
        padding: 0 16px;
    }

    .nav-item {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        border-radius: 12px;
        color: var(--dark-gray);
        text-decoration: none;
        transition: all 0.2s;
        margin-bottom: 8px;
        font-weight: 500;
        border: 1px solid transparent;
    }

    .nav-item:hover {
        background: var(--background-gray);
        color: var(--primary-color);
    }

    .nav-item.active {
        background: var(--primary-color);
        color: var(--white);
        border-color: var(--primary-color);
    }

    .nav-item i {
        width: 20px;
        text-align: center;
    }

    .sidebar-footer {
        padding: 24px 16px 0;
        border-top: 1px solid var(--light-gray);
    }

    .logout-btn {
        width: 100%;
        padding: 14px;
        background: none;
        border: 1px solid var(--light-gray);
        border-radius: 12px;
        color: var(--dark-gray);
        font-weight: 500;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.2s;
    }

    .logout-btn:hover {
        border-color: var(--danger-color);
        color: var(--danger-color);
        background: #ffebee;
    }

    /* MAIN CONTENT */
    .admin-content {
        margin-left: var(--sidebar-width);
        height: 100vh;
        overflow-y: auto;
        padding: 24px;
    }

    /* HEADER */
    .content-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 32px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--light-gray);
    }

    .header-title {
        font-size: 24px;
        font-weight: 700;
        color: var(--dark-color);
    }

    .header-actions {
        display: flex;
        gap: 12px;
    }

    .action-btn {
        padding: 12px 24px;
        border: 1px solid var(--light-gray);
        background: var(--white);
        border-radius: 12px;
        font-size: 14px;
        font-weight: 500;
        color: var(--dark-gray);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.2s;
    }

    .action-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
        transform: translateY(-2px);
    }

    .action-btn.primary {
        background: var(--primary-color);
        color: var(--white);
        border-color: var(--primary-color);
    }

    .action-btn.primary:hover {
        background: var(--primary-dark);
    }
    /* DASHBOARD */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 24px;
        margin-bottom: 32px;
    }

    .stat-card {
        background: var(--white);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        border: 1px solid var(--light-gray);
    }

    .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 16px;
    }

    .stat-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: var(--primary-color);
        color: var(--white);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
    }

    .stat-trend {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: 600;
        background: var(--accent-color);
        color: white;
    }

    .stat-trend.negative {
        background: var(--danger-color);
    }

    .stat-title {
        font-size: 14px;
        color: var(--dark-gray);
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .stat-value {
        font-size: 32px;
        font-weight: 700;
        color: var(--dark-color);
        margin-bottom: 8px;
    }

    .stat-subtitle {
        font-size: 13px;
        color: var(--medium-gray);
    }

    /* TABLES */
    .data-table {
        background: var(--white);
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        margin-bottom: 32px;
    }

    .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px;
        border-bottom: 1px solid var(--light-gray);
    }

    .table-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--dark-color);
    }

    table {
        width: 100%;
        border-collapse: collapse;
    }

    th {
        text-align: left;
        padding: 16px 24px;
        background: var(--background-gray);
        font-weight: 600;
        color: var(--dark-gray);
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 1px solid var(--light-gray);
    }

    td {
        padding: 16px 24px;
        border-bottom: 1px solid var(--light-gray);
        color: var(--dark-color);
    }

    tr:last-child td {
        border-bottom: none;
    }

    tr:hover {
        background: var(--background-gray);
    }

    /* FORM STYLES */
    .form-card {
        background: var(--white);
        border-radius: 16px;
        padding: 32px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        margin-bottom: 32px;
    }

    .form-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 24px;
        color: var(--dark-color);
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 24px;
        margin-bottom: 24px;
    }

    .form-control {
        margin-bottom: 20px;
    }

    .form-control label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--dark-color);
    }

    .form-control input,
    .form-control select,
    .form-control textarea {
        width: 100%;
        padding: 14px 16px;
        border: 2px solid var(--light-gray);
        border-radius: 12px;
        font-size: 15px;
        transition: all 0.2s;
        background: var(--white);
        font-family: 'Inter', sans-serif;
    }

    .form-control input:focus,
    .form-control select:focus,
    .form-control textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
    }

    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .checkbox-group input {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    /* BUTTON STYLES */
    .btn-group {
        display: flex;
        gap: 12px;
        margin-top: 32px;
    }

    .btn {
        padding: 14px 28px;
        border: none;
        border-radius: 12px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.2s;
    }

    .btn-primary {
        background: var(--primary-color);
        color: var(--white);
    }

    .btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(26, 115, 232, 0.3);
    }

    .btn-secondary {
        background: var(--white);
        border: 1px solid var(--light-gray);
        color: var(--dark-gray);
    }

    .btn-secondary:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
    }

    .btn-danger {
        background: var(--danger-color);
        color: var(--white);
    }

    .btn-danger:hover {
        background: #c62828;
        transform: translateY(-2px);
    }

    /* STATUS BADGES */
    .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    .status-active {
        background: #e8f5e9;
        color: #2e7d32;
    }

    .status-inactive {
        background: #ffebee;
        color: #c62828;
    }

    /* MODAL */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 24px;
        backdrop-filter: blur(4px);
    }

    .modal {
        background: var(--white);
        border-radius: 16px;
        width: 100%;
        max-width: 500px;
        padding: 32px;
        position: relative;
        animation: modalIn 0.3s ease;
    }

    @keyframes modalIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .modal-close {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: var(--dark-gray);
        transition: all 0.2s;
    }

    .modal-close:hover {
        background: var(--background-gray);
        color: var(--danger-color);
    }

    .modal-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 16px;
        color: var(--dark-color);
    }

    .modal-content {
        color: var(--dark-gray);
        line-height: 1.6;
        margin-bottom: 32px;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
        .admin-sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s;
            width: 280px;
        }
        
        .admin-sidebar.active {
            transform: translateX(0);
        }
        
        .admin-content {
            margin-left: 0;
        }
        
        .mobile-menu-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border: none;
            background: none;
            color: var(--dark-gray);
            font-size: 20px;
            cursor: pointer;
        }
        
        .login-card {
            padding: 32px 24px;
        }
    }
    </style>
</head>
<body>
    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <div class="login-logo">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h1 class="login-title">Admin NewsHub</h1>
            <p class="login-subtitle">Painel de Administra√ß√£o</p>
            
            <div class="login-form">
                <div class="form-group">
                    <label class="form-label">Senha de Acesso</label>
                    <input type="password" 
                           id="admin-password" 
                           class="form-input" 
                           placeholder="Digite a senha"
                           maxlength="4"
                           oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                    <small style="color: var(--medium-gray); display: block; margin-top: 8px;">
                        Senha num√©rica de 4 d√≠gitos
                    </small>
                </div>
                
                <div id="login-error" class="login-error">
                    <i class="fas fa-exclamation-circle"></i> Senha incorreta!
                </div>
                
                <button class="login-btn" onclick="login()">
                    <i class="fas fa-sign-in-alt"></i> Acessar Painel
                </button>
            </div>
            
            <div style="color: var(--medium-gray); font-size: 14px;">
                <p><i class="fas fa-lock"></i> Acesso restrito ao administrador</p>
            </div>
        </div>
    </div>

    <!-- ADMIN PANEL -->
    <div id="admin-panel" class="admin-panel">
        <!-- SIDEBAR -->
        <nav class="admin-sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="admin-logo">
                    <i class="fas fa-cogs"></i>
                    <span>NewsHub Admin</span>
                </a>
            </div>
            
            <div class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" onclick="showTab('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#sources" class="nav-item" onclick="showTab('sources')">
                    <i class="fas fa-newspaper"></i>
                    <span>Fontes</span>
                </a>
                <a href="#native" class="nav-item" onclick="showTab('native')">
                    <i class="fas fa-star"></i>
                    <span>Not√≠cias Nativas</span>
                </a>
                <a href="#settings" class="nav-item" onclick="showTab('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Configura√ß√µes</span>
                </a>
                <a href="#tools" class="nav-item" onclick="showTab('tools')">
                    <i class="fas fa-tools"></i>
                    <span>Ferramentas</span>
                </a>
                <a href="#analytics" class="nav-item" onclick="showTab('analytics')">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Sair</span>
                </button>
            </div>
        </nav>

        <!-- MAIN CONTENT -->
        <main class="admin-content" id="admin-content">
            <!-- DASHBOARD -->
            <div id="dashboard-tab" class="admin-tab">
                <div class="content-header">
                    <div>
                        <h2 class="header-title">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </h2>
                        <p style="color: var(--dark-gray); margin-top: 4px;">Vis√£o geral do sistema</p>
                    </div>
                    <button class="action-btn" onclick="refreshStats()">
                        <i class="fas fa-sync-alt"></i> Atualizar
                    </button>
                </div>

                <div class="stats-grid" id="dashboard-stats">
                    <!-- Stats will be loaded here -->
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Atividade Recente</h3>
                    </div>
                    <div id="recent-activity">
                        <!-- Recent activity will be loaded here -->
                    </div>
                </div>
            </div>
     <!-- FONTES -->
            <div id="sources-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-newspaper"></i> Gerenciar Fontes
                    </h2>
                    <button class="action-btn primary" onclick="showAddSourceForm()">
                        <i class="fas fa-plus"></i> Nova Fonte
                    </button>
                </div>

                <div id="add-source-form" style="display: none;">
                    <div class="form-card">
                        <h3 class="form-title">
                            <i class="fas fa-plus-circle"></i> Adicionar Nova Fonte
                        </h3>
                        
                        <div class="form-row">
                            <div class="form-control">
                                <label>Nome da Fonte *</label>
                                <input type="text" id="source-name" placeholder="Ex: O Pa√≠s Mo√ßambique">
                            </div>
                            <div class="form-control">
                                <label>URL da API *</label>
                                <input type="url" id="source-url" 
                                       placeholder="https://www.opais.co.mz/wp-json/wp/v2/posts">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-control">
                                <label>Categoria</label>
                                <select id="source-category">
                                    <option value="news">Not√≠cias Gerais</option>
                                    <option value="politics">Pol√≠tica</option>
                                    <option value="economy">Economia</option>
                                    <option value="sports">Esportes</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label>Limite</label>
                                <input type="number" id="source-limit" min="1" max="50" value="10">
                            </div>
                        </div>
                        
                        <div class="form-control">
                            <div class="checkbox-group">
                                <input type="checkbox" id="source-enabled" checked>
                                <label for="source-enabled">Fonte ativa</label>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="addSource()">
                                <i class="fas fa-check"></i> Salvar Fonte
                            </button>
                            <button class="btn btn-secondary" onclick="hideAddSourceForm()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Fontes Configuradas</h3>
                        <button class="action-btn" onclick="refreshSources()">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>URL</th>
                                <th>Status</th>
                                <th>√öltima Atualiza√ß√£o</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="sources-table">
                            <!-- Sources will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- NOT√çCIAS NATIVAS -->
            <div id="native-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-star"></i> Not√≠cias Nativas
                    </h2>
                    <div class="header-actions">
                        <button class="action-btn" onclick="exportNativeNews()">
                            <i class="fas fa-download"></i> Exportar
                        </button>
                        <button class="action-btn primary" onclick="showAddNativeForm()">
                            <i class="fas fa-plus"></i> Nova Not√≠cia
                        </button>
                    </div>
                </div>

                <div id="add-native-form" style="display: none;">
                    <div class="form-card">
                        <h3 class="form-title">
                            <i class="fas fa-plus-circle"></i> Criar Not√≠cia Nativa
                        </h3>
                        
                        <div class="form-control">
                            <label>T√≠tulo *</label>
                            <input type="text" id="native-title" placeholder="T√≠tulo da not√≠cia">
                        </div>
                        
                        <div class="form-control">
                            <label>Conte√∫do *</label>
                            <textarea id="native-content" rows="6" placeholder="Conte√∫do da not√≠cia (HTML ou texto)"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-control">
                                <label>Categoria</label>
                                <select id="native-category">
                                    <option value="news">Not√≠cias</option>
                                    <option value="politics">Pol√≠tica</option>
                                    <option value="economy">Economia</option>
                                    <option value="sports">Esportes</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label>Imagem URL</label>
                                <input type="url" id="native-image" placeholder="https://exemplo.com/imagem.jpg">
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="addNativeNews()">
                                <i class="fas fa-check"></i> Publicar
                            </button>
                            <button class="btn btn-secondary" onclick="hideAddNativeForm()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Not√≠cias Nativas</h3>
                        <div style="display: flex; gap: 12px;">
                            <input type="text" id="search-native" 
                                   placeholder="üîç Buscar not√≠cias..."
                                   style="padding: 10px 16px; border: 1px solid var(--light-gray); border-radius: 8px; width: 200px;">
                            <button class="action-btn" onclick="refreshNativeNews()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>T√≠tulo</th>
                                <th>Categoria</th>
                                <th>Data</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="native-table">
                            <!-- Native news will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- CONFIGURA√á√ïES -->
            <div id="settings-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-cog"></i> Configura√ß√µes
                    </h2>
                    <button class="action-btn primary" onclick="saveSettings()">
                        <i class="fas fa-save"></i> Salvar Tudo
                    </button>
                </div>

                <div class="form-card">
                    <h3 class="form-title">
                        <i class="fas fa-sync-alt"></i> Atualiza√ß√£o
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-control">
                            <label>Intervalo (minutos)</label>
                            <input type="number" id="update-interval" min="1" max="60" value="5">
                        </div>
                        <div class="form-control">
                            <label>Not√≠cias por P√°gina</label>
                            <input type="number" id="per-page" min="10" max="100" value="20">
                        </div>
                    </div>
                    
                    <div class="form-control">
                        <div class="checkbox-group">
                            <input type="checkbox" id="auto-update" checked>
                            <label for="auto-update">Atualiza√ß√£o autom√°tica</label>
                        </div>
                    </div>
                </div>

                <div class="form-card">
                    <h3 class="form-title">
                        <i class="fas fa-user-shield"></i> Seguran√ßa
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-control">
                            <label>Senha Admin</label>
                            <input type="password" id="admin-pass" value="0800" maxlength="4">
                        </div>
                    </div>
                </div>
            </div>

            <!-- FERRAMENTAS -->
            <div id="tools-tab" class="admin-tab" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">
                        <i class="fas fa-tools"></i> Ferramentas
                    </h2>
                </div>

                <div class="stats-grid">
                    <div class="stat-card" onclick="exportAllData()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-file-export"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Exportar</h4>
                        <div class="stat-value">Dados</div>
                        <p class="stat-subtitle">Exportar todos os dados</p>
                    </div>

                    <div class="stat-card" onclick="importAllData()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-file-import"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Importar</h4>
                        <div class="stat-value">Backup</div>
                        <p class="stat-subtitle">Restaurar de backup</p>
                    </div>

                    <div class="stat-card" onclick="clearCache()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-broom"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Limpar</h4>
                        <div class="stat-value">Cache</div>
                        <p class="stat-subtitle">Limpar cache do sistema</p>
                    </div>

                    <div class="stat-card" onclick="optimizeStorage()" style="cursor: pointer;">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-compress-arrows-alt"></i>
                            </div>
                        </div>
                        <h4 class="stat-title">Otimizar</h4>
                        <div class="stat-value">Armazenamento</div>
                        <p class="stat-subtitle">Otimizar espa√ßo usado</p>
                    </div>
                </div>

                <div class="form-card" style="text-align: center;">
                    <h3 class="form-title">
                        <i class="fas fa-exclamation-triangle" style="color: var(--danger-color);"></i> Zona de Perigo
                    </h3>
                    <p style="color: var(--dark-gray); margin-bottom: 24px;">
                        Estas a√ß√µes s√£o irrevers√≠veis
                    </p>
                    <button class="btn btn-danger" onclick="resetSystem()">
                        <i class="fas fa-redo"></i> Resetar Sistema Completo
                    </button>
                </div>
            </div>
        </main>
    </div>
    <!-- MODAL -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <h3 class="modal-title" id="modal-title">Confirmar A√ß√£o</h3>
            <div class="modal-content" id="modal-content"></div>
            <div class="modal-actions" style="display: flex; gap: 12px; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                <button class="btn btn-danger" id="modal-confirm">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
    // CONFIGURA√á√ÉO
    const ADMIN_CONFIG = {
        password: '0800',
        storageKey: 'newshub_moz_data',
        sourcesKey: 'newshub_sources'
    };

    // ELEMENTOS DOM
    const loginScreen = document.getElementById('login-screen');
    const adminPanel = document.getElementById('admin-panel');
    const passwordInput = document.getElementById('admin-password');
    const loginError = document.getElementById('login-error');
    const modal = document.getElementById('confirm-modal');

    // VARI√ÅVEIS
    let currentTab = 'dashboard';
    let pendingAction = null;

    // LOGIN
    function login() {
        const password = passwordInput.value.trim();
        
        if (password === ADMIN_CONFIG.password) {
            loginScreen.style.display = 'none';
            adminPanel.style.display = 'block';
            loginError.style.display = 'none';
            passwordInput.value = '';
            
            // Carrega dados iniciais
            loadDashboard();
            loadSources();
            loadNativeNews();
            
        } else {
            loginError.style.display = 'block';
            passwordInput.focus();
            passwordInput.select();
            
            // Efeito de erro
            passwordInput.style.animation = 'none';
            setTimeout(() => {
                passwordInput.style.animation = 'shake 0.5s';
            }, 10);
        }
    }

    // LOGOUT
    function logout() {
        showModal(
            'Confirmar Sa√≠da',
            'Tem certeza que deseja sair do painel administrativo?',
            () => {
                adminPanel.style.display = 'none';
                loginScreen.style.display = 'flex';
            }
        );
    }

    // NAVEGA√á√ÉO
    function showTab(tabName) {
        // Atualiza navega√ß√£o
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });
        event.target.classList.add('active');
        
        // Esconde todas as tabs
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.style.display = 'none';
        });
        
        // Mostra tab selecionada
        document.getElementById(`${tabName}-tab`).style.display = 'block';
        currentTab = tabName;
        
        // Atualiza t√≠tulo
        updateHeaderTitle(tabName);
    }

    function updateHeaderTitle(tabName) {
        const titles = {
            dashboard: 'Dashboard',
            sources: 'Fontes',
            native: 'Not√≠cias Nativas',
            settings: 'Configura√ß√µes',
            tools: 'Ferramentas',
            analytics: 'Analytics'
        };
        
        const titleEl = document.querySelector('.header-title');
        if (titleEl) {
            const icon = event.target.querySelector('i').className;
            titleEl.innerHTML = `<i class="${icon}"></i> ${titles[tabName] || tabName}`;
        }
    }

    // DASHBOARD
    function loadDashboard() {
        const stats = calculateStats();
        const statsHTML = `
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon">
                    <i class="fas fa-newspaper"></i>
                </div>
                <span class="stat-trend">+${stats.dailyGrowth}%</span>
            </div>
            <h4 class="stat-title">Total de Not√≠cias</h4>
            <div class="stat-value">${stats.totalNews}</div>
            <p class="stat-subtitle">Atualizado agora</p>
        </div>
        
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon" style="background: var(--accent-color);">
                    <i class="fas fa-star"></i>
                </div>
                <span class="stat-trend">+${stats.nativeGrowth}%</span>
            </div>
            <h4 class="stat-title">Not√≠cias Nativas</h4>
            <div class="stat-value">${stats.nativeNews}</div>
            <p class="stat-subtitle">Publicadas por voc√™</p>
        </div>
        
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon" style="background: var(--warning-color);">
                    <i class="fas fa-newspaper"></i>
                </div>
                <span class="stat-trend">${stats.activeSources}/${stats.totalSources}</span>
            </div>
            <h4 class="stat-title">Fontes Ativas</h4>
            <div class="stat-value">${stats.activeSources}</div>
            <p class="stat-subtitle">De ${stats.totalSources} fontes</p>
        </div>
        
        <div class="stat-card">
            <div class="stat-header">
                <div class="stat-icon" style="background: var(--secondary-color);">
                    <i class="fas fa-chart-line"></i>
                </div>
                <span class="stat-trend ${stats.engagement < 0 ? 'negative' : ''}">${stats.engagement}%</span>
            </div>
            <h4 class="stat-title">Engajamento</h4>
            <div class="stat-value">${stats.views}</div>
            <p class="stat-subtitle">Visualiza√ß√µes hoje</p>
        </div>
        `;
        
        document.getElementById('dashboard-stats').innerHTML = statsHTML;
        
        // Carrega atividade recente
        loadRecentActivity();
    }

    function calculateStats() {
        const allNews = JSON.parse(localStorage.getItem('all_news') || '[]');
        const nativeNews = JSON.parse(localStorage.getItem('native_news') || '[]');
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        
        return {
            totalNews: allNews.length,
            nativeNews: nativeNews.length,
            totalSources: sources.length,
            activeSources: sources.filter(s => s.enabled).length,
            dailyGrowth: Math.floor(Math.random() * 20) + 5,
            nativeGrowth: Math.floor(Math.random() * 30) + 10,
            views: Math.floor(Math.random() * 1000) + 500,
            engagement: Math.floor(Math.random() * 40) + 10
        };
    }

    function loadRecentActivity() {
        const activity = [
            { action: 'Not√≠cia publicada', source: 'O Pa√≠s', time: '2 min atr√°s' },
            { action: 'Fonte atualizada', source: 'Jornal Not√≠cias', time: '15 min atr√°s' },
            { action: 'Not√≠cia nativa criada', source: 'Admin', time: '1 hora atr√°s' },
            { action: 'Cache limpo', source: 'Sistema', time: '2 horas atr√°s' },
            { action: 'Backup criado', source: 'Admin', time: '5 horas atr√°s' }
        ];
        
        let html = '<table>';
        activity.forEach(item => {
            html += `
            <tr>
                <td>
                    <div style="font-weight: 500;">${item.action}</div>
                    <div style="font-size: 13px; color: var(--medium-gray);">${item.source}</div>
                </td>
                <td style="color: var(--dark-gray);">${item.time}</td>
            </tr>
            `;
        });
        html += '</table>';
        
        document.getElementById('recent-activity').innerHTML = html;
    }

    function refreshStats() {
        loadDashboard();
        showNotification('Estat√≠sticas atualizadas', 'success');
    }

    // FONTES
    function loadSources() {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const table = document.getElementById('sources-table');
        
        if (sources.length === 0) {
            table.innerHTML = `
            <tr>
                <td colspan="5" style="text-align: center; padding: 40px; color: var(--medium-gray);">
                    <i class="fas fa-newspaper" style="font-size: 32px; opacity: 0.3; margin-bottom: 16px; display: block;"></i>
                    <p>Nenhuma fonte configurada</p>
                </td>
            </tr>
            `;
            return;
        }
        
        let html = '';
        sources.forEach((source, index) => {
            const lastUpdate = source.lastFetch ? 
                new Date(source.lastFetch).toLocaleTimeString('pt-PT') : 'Nunca';
            
            html += `
            <tr>
                <td>
                    <div style="font-weight: 500;">${source.name}</div>
                    <div style="font-size: 13px; color: var(--medium-gray);">${source.category || 'news'}</div>
                </td>
                <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    ${source.api}
                </td>
                <td>
                    <span class="status-badge ${source.enabled ? 'status-active' : 'status-inactive'}">
                        <i class="fas fa-${source.enabled ? 'check' : 'times'}-circle"></i>
                        ${source.enabled ? 'Ativa' : 'Inativa'}
                    </span>
                </td>
                <td style="color: var(--dark-gray);">${lastUpdate}</td>
                <td>
                    <div style="display: flex; gap: 8px;">
                        <button class="action-btn" style="padding: 6px 12px;" onclick="toggleSource(${index})">
                            <i class="fas fa-power-off"></i>
                        </button>
                        <button class="action-btn" style="padding: 6px 12px;" onclick="editSource(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn" style="padding: 6px 12px; color: var(--danger-color);" onclick="deleteSource(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
            `;
        });
        
        table.innerHTML = html;
    }

    function showAddSourceForm() {
        document.getElementById('add-source-form').style.display = 'block';
    }

    function hideAddSourceForm() {
        document.getElementById('add-source-form').style.display = 'none';
        clearSourceForm();
    }

    function clearSourceForm() {
        document.getElementById('source-name').value = '';
        document.getElementById('source-url').value = '';
        document.getElementById('source-category').value = 'news';
        document.getElementById('source-limit').value = '10';
        document.getElementById('source-enabled').checked = true;
    }
 function addSource() {
        const name = document.getElementById('source-name').value.trim();
        const url = document.getElementById('source-url').value.trim();
        const category = document.getElementById('source-category').value;
        const limit = parseInt(document.getElementById('source-limit').value);
        const enabled = document.getElementById('source-enabled').checked;
        
        if (!name || !url) {
            showNotification('Preencha todos os campos obrigat√≥rios', 'error');
            return;
        }
        
        if (!url.includes('/wp-json/wp/v2/posts')) {
            showNotification('URL deve ser uma API WordPress v√°lida', 'error');
            return;
        }
        
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        
        // Verifica se j√° existe
        if (sources.some(s => s.url === url)) {
            showNotification('Esta fonte j√° est√° configurada', 'error');
            return;
        }
        
        sources.push({
            id: name.toLowerCase().replace(/\s+/g, '_'),
            name,
            api: url,
            category,
            limit,
            enabled,
            lastFetch: 0
        });
        
        localStorage.setItem('news_sources', JSON.stringify(sources));
        
        hideAddSourceForm();
        loadSources();
        loadDashboard();
        
        showNotification(`Fonte "${name}" adicionada com sucesso`, 'success');
    }

    function toggleSource(index) {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        sources[index].enabled = !sources[index].enabled;
        localStorage.setItem('news_sources', JSON.stringify(sources));
        loadSources();
        
        showNotification(
            `Fonte ${sources[index].enabled ? 'ativada' : 'desativada'}`,
            sources[index].enabled ? 'success' : 'warning'
        );
    }

    function editSource(index) {
        const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
        const source = sources[index];
        
        // Preenche formul√°rio
        document.getElementById('source-name').value = source.name;
        document.getElementById('source-url').value = source.api;
        document.getElementById('source-category').value = source.category || 'news';
        document.getElementById('source-limit').value = source.limit || 10;
        document.getElementById('source-enabled').checked = source.enabled;
        
        // Remove da lista
        sources.splice(index, 1);
        localStorage.setItem('news_sources', JSON.stringify(sources));
        
        showAddSourceForm();
        loadSources();
    }

    function deleteSource(index) {
        showModal(
            'Remover Fonte',
            'Tem certeza que deseja remover esta fonte?<br>Esta a√ß√£o n√£o pode ser desfeita.',
            () => {
                const sources = JSON.parse(localStorage.getItem('news_sources') || '[]');
                const removed = sources.splice(index, 1)[0];
                localStorage.setItem('news_sources', JSON.stringify(sources));
                
                loadSources();
                loadDashboard();
                
                showNotification(`Fonte "${removed.name}" removida`, 'success');
            }
        );
    }

    function refreshSources() {
        loadSources();
        showNotification('Fontes atualizadas', 'success');
    }

    // NOT√çCIAS NATIVAS
    function loadNativeNews() {
        const nativeNews = JSON.parse(localStorage.getItem('native_news') || '[]');
        const table = document.getElementById('native-table');
        
        if (nativeNews.length === 0) {
            table.innerHTML = `
            <tr>
                <td colspan="4" style="text-align: center; padding: 40px; color: var(--medium-gray);">
                    <i class="fas fa-star" style="font-size: 32px; opacity: 0.3; margin-bottom: 16px; display: block;"></i>
                    <p>Nenhuma not√≠cia nativa</p>
                </td>
            </tr>
            `;
            return;
        }
        
        let html = '';
        nativeNews.forEach((news, index) => {
            const date = new Date(news.timestamp).toLocaleDateString('pt-PT');
            
            html += `
            <tr>
                <td>
                    <div style="font-weight: 500; max-width: 300px; overflow: hidden; text-overflow: ellipsis;">${news.title}</div>
                    <div style="font-size: 13px; color: var(--medium-gray);">${news.source || 'NewsHub'}</div>
                </td>
                <td>${news.category || 'Not√≠cias'}</td>
                <td style="color: var(--dark-gray);">${date}</td>
                <td>
                    <div style="display: flex; gap: 8px;">
                        <button class="action-btn" style="padding: 6px 12px;" onclick="viewNativeNews('${news.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn" style="padding: 6px 12px;" onclick="editNativeNews(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn" style="padding: 6px 12px; color: var(--danger-color);" onclick="deleteNativeNews(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
            `;
        });
        
        table.innerHTML = html;
    }

    function showAddNativeForm() {
        document.getElementById('add-native-form').style.display = 'block';
    }

    function hideAddNativeForm() {
        document.getElementById('add-native-form').style.display = 'none';
        clearNativeForm();
    }

    function clearNativeForm() {
        document.getElementById('native-title').value = '';
        document.getElementById('native-content').value = '';
        document.getElementById('native-category').value = 'news';
        document.getElementById('native-image').value = '';
    }

    function addNativeNews() {
        const title = document.getElementById('native-title').value.trim();
        const content = document.getElementById('native-content').value.trim();
        const category = document.getElementById('native-category').value;
        const image = document.getElementById('native-image').value.trim();
        
        if (!title || !content) {
            showNotification('Preencha t√≠tulo e conte√∫do', 'error');
            return;
        }
        
        const nativeNews = JSON.parse(localStorage.getItem('native_news') || []);
        
        const newNews = {
            id: `native_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
            title,
            content: content.startsWith('<') ? content : `<p>${content}</p>`,
            excerpt: content.substring(0, 200) + '...',
            image: image || `https://via.placeholder.com/600x400/1a73e8/ffffff?text=${encodeURIComponent(title.substring(0, 2))}`,
            source: 'NewsHub MOZ',
            sourceId: 'newshub',
            date: new Date().toISOString(),
            timestamp: Date.now(),
            category,
            isNative: true,
            savedAt: new Date().toISOString()
        };
        
        nativeNews.unshift(newNews);
        localStorage.setItem('native_news', nativeNews);
        
        // Atualiza cache geral
        updateNewsCache(newNews);
        
        hideAddNativeForm();
        loadNativeNews();
        loadDashboard();
        
        showNotification('Not√≠cia nativa publicada com sucesso', 'success');
    }

    function updateNewsCache(news) {
        const allNews = JSON.parse(localStorage.getItem('all_news') || []);
        allNews.unshift(news);
        localStorage.setItem('all_news', allNews.slice(0, 200));
    }

    function viewNativeNews(id) {
        window.open(`article.html?id=${id}`, '_blank');
    }

    function editNativeNews(index) {
        const nativeNews = JSON.parse(localStorage.getItem('native_news') || []);
        const news = nativeNews[index];
        
        // Preenche formul√°rio
        document.getElementById('native-title').value = news.title;
        document.getElementById('native-content').value = news.content;
        document.getElementById('native-category').value = news.category || 'news';
        document.getElementById('native-image').value = news.image || '';
        
        // Remove da lista
        nativeNews.splice(index, 1);
        localStorage.setItem('native_news', nativeNews);
        
        showAddNativeForm();
        loadNativeNews();
    }

    function deleteNativeNews(index) {
        showModal(
            'Remover Not√≠cia Nativa',
            'Tem certeza que deseja remover esta not√≠cia?<br>Esta a√ß√£o n√£o pode ser desfeita.',
            () => {
                const nativeNews = JSON.parse(localStorage.getItem('native_news') || []);
                const removed = nativeNews.splice(index, 1)[0];
                localStorage.setItem('native_news', nativeNews);
                
                loadNativeNews();
                loadDashboard();
                
                showNotification('Not√≠cia removida', 'success');
            }
        );
    }

    function exportNativeNews() {
        const nativeNews = JSON.parse(localStorage.getItem('native_news') || []);
        const data = {
            news: nativeNews,
            exportedAt: new Date().toISOString()
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `native-news-export-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        
        showNotification('Not√≠cias nativas exportadas', 'success');
    }

    function refreshNativeNews() {
        loadNativeNews();
        showNotification('Not√≠cias nativas atualizadas', 'success');
    }
  // CONFIGURA√á√ïES
    function saveSettings() {
        const settings = {
            updateInterval: parseInt(document.getElementById('update-interval').value) || 5,
            perPage: parseInt(document.getElementById('per-page').value) || 20,
            autoUpdate: document.getElementById('auto-update').checked,
            adminPassword: document.getElementById('admin-pass').value || '0800'
        };
        
        localStorage.setItem('newshub_settings', JSON.stringify(settings));
        showNotification('Configura√ß√µes salvas com sucesso', 'success');
    }

    // FERRAMENTAS
    function exportAllData() {
        const data = {
            native_news: JSON.parse(localStorage.getItem('native_news') || []),
            all_news: JSON.parse(localStorage.getItem('all_news') || []),
            news_sources: JSON.parse(localStorage.getItem('news_sources') || []),
            settings: JSON.parse(localStorage.getItem('newshub_settings') || {}),
            exportedAt: new Date().toISOString(),
            version: '2.0.0'
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `newshub-backup-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        
        showNotification('Backup completo exportado', 'success');
    }

    function importAllData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    if (!data.version) {
                        throw new Error('Arquivo inv√°lido');
                    }
                    
                    showModal(
                        'Importar Backup',
                        `Tem certeza que deseja importar este backup?<br>
                         <strong>Data:</strong> ${new Date(data.exportedAt).toLocaleString()}<br>
                         <strong>Not√≠cias nativas:</strong> ${data.native_news?.length || 0}<br>
                         <strong>Fontes:</strong> ${data.news_sources?.length || 0}`,
                        () => {
                            if (data.native_news) localStorage.setItem('native_news', JSON.stringify(data.native_news));
                            if (data.all_news) localStorage.setItem('all_news', JSON.stringify(data.all_news));
                            if (data.news_sources) localStorage.setItem('news_sources', JSON.stringify(data.news_sources));
                            if (data.settings) localStorage.setItem('newshub_settings', JSON.stringify(data.settings));
                            
                            loadDashboard();
                            loadSources();
                            loadNativeNews();
                            
                            showNotification('Backup importado com sucesso', 'success');
                        }
                    );
                } catch (error) {
                    showNotification('Erro ao importar backup', 'error');
                }
            };
            
            reader.readAsText(file);
        };
        
        input.click();
    }

    function clearCache() {
        // Remove caches antigos
        Object.keys(localStorage).forEach(key => {
            if (key.startsWith('cache_') || key.startsWith('news_')) {
                try {
                    const data = JSON.parse(localStorage.getItem(key));
                    const age = Date.now() - (data?.timestamp || 0);
                    if (age > 24 * 60 * 60 * 1000) { // 24 horas
                        localStorage.removeItem(key);
                    }
                } catch (e) {
                    localStorage.removeItem(key);
                }
            }
        });
        
        showNotification('Cache limpo com sucesso', 'success');
    }

    function optimizeStorage() {
        // Remove not√≠cias duplicadas
        const allNews = JSON.parse(localStorage.getItem('all_news') || []);
        const seen = new Set();
        const uniqueNews = allNews.filter(news => {
            const key = news.title + news.source;
            if (seen.has(key)) return false;
            seen.add(key);
            return true;
        });
        
        localStorage.setItem('all_news', uniqueNews);
        showNotification('Armazenamento otimizado', 'success');
    }

    function resetSystem() {
        showModal(
            'Resetar Sistema',
            `<div style="color: var(--danger-color); text-align: center;">
                <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 16px;"></i>
                <h3 style="color: var(--danger-color);">ATEN√á√ÉO!</h3>
                <p>Todos os dados ser√£o permanentemente removidos:</p>
                <ul style="text-align: left; margin: 16px 0;">
                    <li>Todas as not√≠cias nativas</li>
                    <li>Todas as fontes configuradas</li>
                    <li>Todas as configura√ß√µes</li>
                </ul>
                <p><strong>Esta a√ß√£o n√£o pode ser desfeita!</strong></p>
                <p>Digite <code>RESETAR</code> para confirmar:</p>
                <input type="text" id="reset-confirm" style="width: 100%; padding: 12px; margin: 16px 0; border: 2px solid var(--danger-color); border-radius: 8px; text-align: center; font-family: monospace;">
            </div>`,
            () => {
                const confirmInput = document.getElementById('reset-confirm');
                if (confirmInput && confirmInput.value === 'RESETAR') {
                    // Limpa todos os dados
                    localStorage.clear();
                    
                    // Recarrega a p√°gina
                    setTimeout(() => {
                        window.location.reload();
                    }, 1000);
                    
                    showNotification('Sistema resetado com sucesso', 'success');
                } else {
                    showNotification('Confirma√ß√£o incorreta', 'error');
                }
            }
        );
    }

    // MODAL
    function showModal(title, content, callback) {
        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-content').innerHTML = content;
        pendingAction = callback;
        modal.style.display = 'flex';
        
        document.getElementById('modal-confirm').onclick = () => {
            if (pendingAction) {
                pendingAction();
            }
            closeModal();
        };
    }

    function closeModal() {
        modal.style.display = 'none';
        pendingAction = null;
    }

    // NOTIFICA√á√ïES
    function showNotification(message, type = 'info') {
        // Sistema de notifica√ß√µes simples
        console.log(`[${type.toUpperCase()}] ${message}`);
    }

    // ANIMA√á√ÉO DE SHAKE
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    `;
    document.head.appendChild(style);

    // ATALHOS DE TECLADO
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && document.activeElement === passwordInput) {
            login();
        }
        
        if (e.key === 'Escape') {
            closeModal();
        }
    });
    </script>
</body>
</html>